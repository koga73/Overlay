/*
 * overlay v3.0.0 Copyright (c) 2020 AJ Savino
 * https://github.com/koga73/overlay
 * MIT License
 */
!function(){var s,k="Overlay",w=k.toLowerCase(),e="beforeshow",t="aftershow",n="beforehide",r="afterhide",D={CLASS_CONTAINER:w+"-container",CLASS_BACKGROUND:w+"-background",CLASS_FRAME:w+"-frame",CLASS_CLOSE:w+"-close",CLASS_FRAME_VISIBLE:w+"-visible",CLASS_BODY_VISIBLE:w+"-visible",CLASS_CONTENT:w+"-content",DATA_CONTAINER:"data-"+w+"-container",DATA_PAGE_WRAP:"data-"+w+"-page-wrap",DATA_TRIGGER:"data-"+w+"-trigger",DATA_WIDTH:"data-"+w+"-width",DATA_HEIGHT:"data-"+w+"-height",DATA_OFFSET_X:"data-"+w+"-offset-x",DATA_OFFSET_Y:"data-"+w+"-offset-y",DATA_CONTAINER_CLASS:"data-"+w+"-container-class",DATA_USER_CLOSABLE:"data-"+w+"-user-closable",DATA_AUTO_FOCUS:"data-"+w+"-auto-focus",DATA_IMMEDIATE:"data-"+w+"-immediate",FOCUSABLE:"a[href],input,select,textarea,button,[tabindex]",DEFAULT_ARIA_LABEL:k},I=function(){for(var n=null,t=null,e=[["webkitTransition","webkitTransitionEnd","-webkit-"],["transition","transitionend",""]],r=e.length,i=0;i<r&&void 0===document.documentElement.style[e[i][0]];i++);return i!=r&&(n=e[i][1],t=e[i][2]),{hasTransition:function(e){return void 0!==document.documentElement.currentStyle?0<parseFloat(e.currentStyle[t+"transition-duration"]):0<parseFloat(window.getComputedStyle(e)[t+"transition-duration"])},onTransitionComplete:function(e,t){n?O.addEventListener(e,n,t):t()},offTransitionComplete:function(e,t){n&&(void 0!==t?O.removeEventListener(e,n,t):O.removeEventListener(e,n))}}}(),H=("function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{addClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");for(var r in t=t.split(" "))n.push(t[r].trim());e.setAttribute("class",n.join(" ").trim())},removeClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");for(var r in t=t.split(" "))for(var i=n.length,a=0;a<i;a++)n[a]==t[r].trim()&&(n.splice(a,1),i--,a--);e.setAttribute("class",n.join(" ").trim())},hasClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");t=t.split(" ");var r=0;for(var i in t)for(var a=n.length,o=0;o<a;o++)if(n[o]==t[i].trim()){r++;break}return r==t.length}}),O={Event:(s={Event:function(t,e){var n=null;try{n=new CustomEvent(t,{detail:e})}catch(e){"undefined"!=typeof document&&document.createEventObject?(n=document.createEventObject("Event")).initCustomEvent&&n.initCustomEvent(t,!0,!0):n={}}return n.type=t,n.detail=e,n},addEvents:function(e,t){return t=!0===t,e._eventHandlers||(e._eventHandlers={}),e.addEventListener||(e.addEventListener=s._addEventListener,t||(e.on=s._addEventListener)),e.removeEventListener||(e.removeEventListener=s._removeEventListener,t||(e.off=s._removeEventListener)),e.dispatchEvent||(e.dispatchEvent=s._dispatchEvent,t||(e.trigger=s._dispatchEvent,e.emit=s._dispatchEvent)),e},removeEvents:function(e,t){return t=!0===t,e._eventHandlers&&delete e._eventHandlers,e.addEventListener&&(delete e.addEventListener,t||delete e.on),e.removeEventListener&&(delete e.removeEventListener,t||delete e.off),e.dispatchEvent&&(delete e.dispatchEvent,t||(delete e.trigger,delete e.emit)),e},addEventListener:function(e,t,n){if("string"!=typeof e){e._eventHandlers||(e._eventHandlers={});for(var r=(t=t.split(/,|\s/)).length,i=0;i<r;i++){var a,o=t[i];e.addEventListener?(n=s._addEventHandler(e,o,n),e.addEventListener(o,n)):e.attachEvent?((a=function(){n(window.event)}).handler=n,a=s._addEventHandler(e,o,a),e.attachEvent("on"+o,a)):"undefined"!=typeof jQuery?(n=s._addEventHandler(e,o,n),jQuery.on(o,n)):(e.addEventListener=s._addEventListener,e.addEventListener(o,n))}}},_addEventListener:function(e,t){t._isCustom=!0,s._addEventHandler(this,e,t)},_addEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;a<i;a++){if(r[a]===n)return n;if(r[a].handler&&r[a].handler===n)return r[a]}return r.push(n),n},removeEventListener:function(e,t,n){if("string"!=typeof e){e._eventHandlers||(e._eventHandlers={});for(var r=(t=t.split(/,|\s/)).length,i=0;i<r;i++)for(var a=t[i],o=void 0===n?e._eventHandlers[a]||[]:[n],l=o.length,d=0;d<l;d++){n=o[d];e.removeEventListener?(n=s._removeEventHandler(e,a,n),e.removeEventListener(a,n)):e.detachEvent?(n=s._removeEventHandler(e,a,n),e.detachEvent("on"+a,n)):"undefined"!=typeof jQuery?(n=s._removeEventHandler(e,a,n),jQuery.off(a,n)):(e.removeEventListener=s._removeEventListener,e.removeEventListener(a,n))}}},_removeEventListener:function(e,t){for(var n=(e=e.split(/,|\s/)).length,r=0;r<n;r++)for(var i=e[r],a=void 0===t?this._eventHandlers[i]||[]:[t],o=a.length,l=0;l<o;l++){(t=a[l])._isCustom=!1,s._removeEventHandler(this,i,t)}},_removeEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;a<i;a++){if(r[a]===n)return r.splice(a,1)[0];if(r[a].handler&&r[a].handler===n)return r.splice(a,1)[0]}},dispatchEvent:function(e,t){e._eventHandlers||(e._eventHandlers={}),e.dispatchEvent?e.dispatchEvent(t):e.fireEvent?e.fireEvent("on"+type,t):"undefined"!=typeof jQuery?jQuery(e).trigger(jQuery.Event(t.type,{type:t.type,data:t.detail})):(e.dispatchEvent=s._dispatchEvent,e.dispatchEvent(t))},_dispatchEvent:function(e){s._dispatchEventHandlers(this,e)},_dispatchEventHandlers:function(e,t){var n=e._eventHandlers[t.type];if(n)for(var r=n.length,i=0;i<r;i++)n[i](t,t.detail)}}).Event,addEvents:s.addEvents,removeEvents:s.removeEvents,addEventListener:s.addEventListener,removeEventListener:s.removeEventListener,dispatchEvent:s.dispatchEvent},R={_singleton:null,_focusin_handlerStack:[],_keyup_handlerStack:[],_init:function(){var e=new window[k];for(var t in e.init(),e)window[k][t]=e[t];R._singleton=e},_destory:function(){R._singleton&&R._singleton.destroy(),R._singleton=null},_update:function(){R._singleton.container=window[k].container,R._singleton.pageWrap=window[k].pageWrap,R._singleton.requestCloseCallback=window[k].requestCloseCallback},_addFocusin:function(e){var t=R._focusin_handlerStack,n=t.length;t.push(e),n||O.addEventListener(document,"focusin",R._handler_document_focusin)},_removeFocusin:function(e){for(var t=R._focusin_handlerStack,n=t.length,r=0;r<n;r++)if(t[r]===e){t.splice(r,1);break}t.length||O.removeEventListener(document,"focusin",R._handler_document_focusin)},_handler_document_focusin:function(e){var t=R._focusin_handlerStack,n=t.length;n&&t[n-1].call(this,e)},_addKeyup:function(e){var t=R._keyup_handlerStack,n=t.length;t.push(e),n||O.addEventListener(document,"keyup",R._handler_document_keyup)},_removeKeyup:function(e){for(var t=R._keyup_handlerStack,n=t.length,r=0;r<n;r++)if(t[r]===e){t.splice(r,1);break}t.length||O.removeEventListener(document,"keyup",R._handler_document_keyup)},_handler_document_keyup:function(e){var t=R._keyup_handlerStack,n=t.length;n&&t[n-1].call(this,e)}};window[k]=function(){var L={container:null,pageWrap:null,requestCloseCallback:null,_initialized:!1,_scopeElement:null,_container:null,_background:null,_content:null,_frame:null,_close:null,_showCallback:null,_hideCallback:null,_lastFocus:null,_immediate:!1},S={init:function(e){void 0===e&&(e=document.body||null);var t=document.createElement("div");t.setAttribute("class",D.CLASS_CONTAINER),L._container=t;var n=document.createElement("div");n.setAttribute("class",D.CLASS_BACKGROUND),L._background=n;var r=document.createElement("div");r.setAttribute("class",D.CLASS_FRAME),L._frame=r;var i=document.createElement("button");if(i.setAttribute("class",D.CLASS_CLOSE),i.setAttribute("type","button"),i.innerHTML="Close",L._close=i,r.appendChild(i),t.appendChild(n),t.appendChild(r),O.addEvents(y),e){(t=e.querySelector("["+D.DATA_CONTAINER+"]"))&&(y.container=t);var a=e.querySelector("["+D.DATA_PAGE_WRAP+"]");a&&(y.pageWrap=a);for(var o=e.querySelectorAll("["+D.DATA_TRIGGER+"]"),l=o.length,d=0;d<l;d++)y.addTrigger(o[d])}L._scopeElement=e,L._initialized=!0},destroy:function(){L._initialized=!1,R._removeFocusin(S._handler_document_focusin),R._removeKeyup(S._handler_document_keyup);var e=L._scopeElement;if(e)for(var t=e.querySelectorAll("["+D.DATA_TRIGGER+"]"),n=t.length,r=0;r<n;r++)y.removeTrigger(t[r]);L._scopeElement=null,H.removeClass(document.body,D.CLASS_BODY_VISIBLE),S._focusRestore(),S._resetContent(),L._showCallback=null,L._hideCallback=null,L._lastFocus=!1,L._immediate=!1,O.removeEvents(y);var i=L._close;i&&(O.removeEventListener(i,"click",S._handler_close_click),i.removeAttribute("disabled")),L._close=null,L._frame=null;var a=L._background;a&&O.removeEventListener(a,"click",S._handler_background_click),L._background=null;var o=L._container;o&&(o.setAttribute("class",""),o.parentNode&&o.parentNode.removeChild(o)),L._container=null},addTrigger:function(e,t){if(!(t=t||null))if(e.getAttribute(D.DATA_TRIGGER).length)t=e.getAttribute(D.DATA_TRIGGER);else{if(!e.hasAttribute("href"))throw new Error("Trigger must have "+D.DATA_TRIGGER+" or href");t=e.getAttribute("href")}O.addEventListener(e,"click",function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,y.show(t),!1})},removeTrigger:function(e){O.removeEventListener(e,"click")},show:function(e,t,n){if(!L._initialized)throw new Error(k+" is not initialized. To fix call init()");R._update();var r,i,a,o,l="string"==typeof e;if(l&&-1!=e.indexOf("#")&&(e=e.replace(/.*#/,"")),void 0===t&&(t={}),L._showCallback=n,H.addClass(document.body,D.CLASS_BODY_VISIBLE),O.dispatchEvent(y,new O.Event(y.EVENT_BEFORE_SHOW,{content:e.id||e})),null==L._content){if(!(e=l?document.getElementById(e):e))throw new Error("Invalid content");var d,s,_,c,u,v,E="",h=!0,f=!0,m=!1;void 0!==t.width?r=t.width:(d=e.getAttribute(D.DATA_WIDTH))&&d.length&&(r=d),void 0!==t.height?i=t.height:(s=e.getAttribute(D.DATA_HEIGHT))&&s.length&&(i=s),void 0!==t.offsetX?a=t.offsetX:(_=e.getAttribute(D.DATA_OFFSET_X))&&_.length&&(a=_),void 0!==t.offsetY?o=t.offsetY:(c=e.getAttribute(D.DATA_OFFSET_Y))&&c.length&&(o=c),void 0!==t.containerClass?E=t.containerClass:(u=e.getAttribute(D.DATA_CONTAINER_CLASS))&&u.length&&(E=u),void 0!==t.userClosable?h=!0===t.userClosable:e.hasAttribute(D.DATA_USER_CLOSABLE)&&(h="false"!==(e.getAttribute(D.DATA_USER_CLOSABLE)||"true").toLowerCase()),void 0!==t.autoFocus?f=!0===t.autoFocus:e.hasAttribute(D.DATA_AUTO_FOCUS)&&(f="false"!==(e.getAttribute(D.DATA_AUTO_FOCUS)||"true").toLowerCase()),void 0!==t.immediate?m=!0===t.immediate:e.hasAttribute(D.DATA_IMMEDIATE)&&(m=(v=e.getAttribute(D.DATA_IMMEDIATE)||"true")&&"false"!==v.toLowerCase());var A=L._container,p=L._background,g=L._frame,C=L._close;if(H.addClass(e,D.CLASS_CONTENT),e.setAttribute("tabindex","0"),e.hasAttribute("aria-label")||e.hasAttribute("aria-labelled-by")||e.setAttribute("aria-label",D.DEFAULT_ARIA_LABEL),e["_"+w+"Data"]=e["_"+w+"Data"]||{},void 0===r&&(r=void 0!==document.documentElement.currentStyle?e.currentStyle.width:window.getComputedStyle(e).width),parseInt(r)?(g.style.width=r,e["_"+w+"Data"].width=r,e.style.width="100%"):g.style.width="",void 0===i&&(i=void 0!==document.documentElement.currentStyle?e.currentStyle.height:window.getComputedStyle(e).height),parseInt(i)?(g.style.height=i,e["_"+w+"Data"].height=i,e.style.height="100%"):g.style.height="",g.style.left=void 0!==a?a:"",g.style.top=void 0!==o?o:"",L._content=e,h?(R._addKeyup(S._handler_document_keyup),O.addEventListener(p,"click",S._handler_background_click),O.addEventListener(C,"click",S._handler_close_click)):C.setAttribute("disabled","disabled"),e["_"+w+"Data"].parent=e.parentNode,l&&e.parentNode.removeChild(e),g.insertBefore(e,C),!y.container){if(!document.body)throw new Error("Container is undefined");y.container=document.body}var T=y.container;y.container.length&&(T=y.container[0]),T.appendChild(A),S._focusTrap(T,e,f),H.addClass(A,E);var b=setTimeout(function(){clearTimeout(b),H.addClass(A,D.CLASS_FRAME_VISIBLE)},50);!(L._immediate=m)&&(I.hasTransition(p)||I.hasTransition(g))?(I.offTransitionComplete(A),I.onTransitionComplete(A,S._handler_show_complete)):S._handler_show_complete()}else y.hide(function(){y.show(e,t,n)})},hide:function(e){if(!L._initialized)throw new Error(k+" is not initialized. To fix call init()");L._hideCallback=e;var t=L._content;O.dispatchEvent(y,new O.Event(y.EVENT_BEFORE_HIDE,{content:t.id||t})),R._removeFocusin(S._handler_document_focusin),R._removeKeyup(S._handler_document_keyup);var n=L._close;n&&(O.removeEventListener(n,"click",S._handler_close_click),n.removeAttribute("disabled"));var r=L._background;r&&O.removeEventListener(r,"click",S._handler_background_click);var i=L._frame,a=L._container;a&&(!L._immediate&&(I.hasTransition(r)||I.hasTransition(i))?(I.offTransitionComplete(a),I.onTransitionComplete(a,S._handler_hide_complete)):S._handler_hide_complete(),H.removeClass(a,D.CLASS_FRAME_VISIBLE))},_focusTrap:function(e,t,n){n=!0===n,R._addFocusin(S._handler_document_focusin),L._lastFocus=document.activeElement;var r=y.pageWrap;if(r){if(r.contains(e))throw"Error: The page wrapper ["+D.DATA_PAGE_WRAP+"] should not contain the container. They should be siblings instead.";r.setAttribute("aria-hidden","true"),r.setAttribute("tabindex","-1")}((n?t.querySelector(D.FOCUSABLE):null)||t).focus()},_focusRestore:function(){R._removeFocusin(S._handler_document_focusin);var e=y.pageWrap;e&&(e.removeAttribute("aria-hidden","true"),e.removeAttribute("tabindex","-1"));var t=L._lastFocus;t&&t.focus(),L._lastFocus=null},_resetContent:function(){var e,t=L._content;t&&(t.parentNode.removeChild(t),void 0!==(e=t["_"+w+"Data"]).width&&(t.style.width=""),void 0!==e.height&&(t.style.height=""),void 0!==e.parent&&e.parent&&e.parent.appendChild(t),e=null,t.removeAttribute("tabindex"),H.removeClass(t,D.CLASS_CONTENT)),L._content=null},_handler_show_complete:function(){I.offTransitionComplete(L._container);var e=L._content;O.dispatchEvent(y,new O.Event(y.EVENT_AFTER_SHOW,{content:e.id||e}));var t=L._showCallback;void 0!==t&&(t(),L._showCallback=null)},_handler_hide_complete:function(){var e=L._container;I.offTransitionComplete(e);var t=L._content;S._resetContent(),e.setAttribute("class",D.CLASS_CONTAINER),e.parentNode.removeChild(e),S._focusRestore(),H.removeClass(document.body,D.CLASS_BODY_VISIBLE),O.dispatchEvent(y,new O.Event(y.EVENT_AFTER_HIDE,{content:t.id||t}));var n=L._hideCallback;void 0!==n&&(n(),L._hideCallback=null)},_handler_close_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,S._requestClose(),!1},_handler_background_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,S._requestClose(),!1},_handler_document_keyup:function(e){27==e.keyCode&&S._requestClose()},_requestClose:function(){var e,t;y.requestCloseCallback?(e=L._content,!1!==(t=y.requestCloseCallback(e.id||e))&&0!==t&&y.hide()):y.hide()},_handler_document_focusin:function(e){var t,n=e.target||e.srcElement,r=L._frame;n==r||r.contains(n)||(void 0!==e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,(t=L._content)&&t.focus())}},y={EVENT_BEFORE_SHOW:e,EVENT_AFTER_SHOW:t,EVENT_BEFORE_HIDE:n,EVENT_AFTER_HIDE:r,container:L.container,pageWrap:L.pageWrap,requestCloseCallback:L.requestCloseCallback,init:S.init,destroy:S.destroy,addTrigger:S.addTrigger,removeTrigger:S.removeTrigger,hide:S.hide,show:S.show};return y},R._init()}();