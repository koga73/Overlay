/*
 * overlay v3.0.0 Copyright (c) 2020 AJ Savino
 * https://github.com/koga73/overlay
 * MIT License
 */
!function(){var d,I="Overlay",D=I.toLowerCase()+"-",e="beforeshow",t="aftershow",n="beforehide",r="afterhide",O={CLASS_CONTAINER:D+"container",CLASS_BACKGROUND:D+"background",CLASS_FRAME:D+"frame",CLASS_CLOSE:D+"close",CLASS_FRAME_VISIBLE:D+"visible",CLASS_BODY_VISIBLE:D+"visible",CLASS_CONTENT:D+"content",DATA_CONTAINER:"data-"+D+"container",DATA_PAGE_WRAP:"data-"+D+"page-wrap",DATA_TRIGGER:"data-"+D+"trigger",DATA_WIDTH:"data-"+D+"width",DATA_HEIGHT:"data-"+D+"height",DATA_OFFSET_X:"data-"+D+"offset-x",DATA_OFFSET_Y:"data-"+D+"offset-y",DATA_CONTAINER_CLASS:"data-"+D+"container-class",DATA_USER_CLOSABLE:"data-"+D+"user-closable",DATA_AUTO_FOCUS:"data-"+D+"auto-focus",DATA_IMMEDIATE:"data-"+D+"immediate",FOCUSABLE:"a[href],input,select,textarea,button,[tabindex]",DEFAULT_ARIA_LABEL:I},R=function(){for(var n=null,t=null,e=[["webkitTransition","webkitTransitionEnd","-webkit-"],["transition","transitionend",""]],r=e.length,i=0;i<r&&void 0===document.documentElement.style[e[i][0]];i++);return i!=r&&(n=e[i][1],t=e[i][2]),{hasTransition:function(e){return void 0!==document.documentElement.currentStyle?0<parseFloat(e.currentStyle[t+"transition-duration"]):0<parseFloat(window.getComputedStyle(e)[t+"transition-duration"])},onTransitionComplete:function(e,t){n?H.addEventListener(e,n,t):t()},offTransitionComplete:function(e,t){n&&(void 0!==t?H.removeEventListener(e,n,t):H.removeEventListener(e,n))}}}(),F=("function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{addClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");for(var r in t=t.split(" "))n.push(t[r].trim());e.setAttribute("class",n.join(" ").trim())},removeClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");for(var r in t=t.split(" "))for(var i=n.length,a=0;a<i;a++)n[a]==t[r].trim()&&(n.splice(a,1),i--,a--);e.setAttribute("class",n.join(" ").trim())},hasClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");t=t.split(" ");var r=0;for(var i in t)for(var a=n.length,o=0;o<a;o++)if(n[o]==t[i].trim()){r++;break}return r==t.length}}),H={Event:(d={Event:function(t,e){var n=null;try{n=new CustomEvent(t,{detail:e})}catch(e){"undefined"!=typeof document&&document.createEventObject?(n=document.createEventObject("Event")).initCustomEvent&&n.initCustomEvent(t,!0,!0):n={}}return n.type=t,n.detail=e,n},addEvents:function(e,t){return t=!0===t,e._eventHandlers||(e._eventHandlers={}),e.addEventListener||(e.addEventListener=d._addEventListener,t||(e.on=d._addEventListener)),e.removeEventListener||(e.removeEventListener=d._removeEventListener,t||(e.off=d._removeEventListener)),e.dispatchEvent||(e.dispatchEvent=d._dispatchEvent,t||(e.trigger=d._dispatchEvent,e.emit=d._dispatchEvent)),e},removeEvents:function(e,t){return t=!0===t,e._eventHandlers&&delete e._eventHandlers,e.addEventListener&&(delete e.addEventListener,t||delete e.on),e.removeEventListener&&(delete e.removeEventListener,t||delete e.off),e.dispatchEvent&&(delete e.dispatchEvent,t||(delete e.trigger,delete e.emit)),e},addEventListener:function(e,t,n){if("string"!=typeof e){e._eventHandlers||(e._eventHandlers={});for(var r=(t=t.split(/,|\s/)).length,i=0;i<r;i++){var a,o=t[i];e.addEventListener?(n=d._addEventHandler(e,o,n),e.addEventListener(o,n)):e.attachEvent?((a=function(){n(window.event)}).handler=n,a=d._addEventHandler(e,o,a),e.attachEvent("on"+o,a)):"undefined"!=typeof jQuery?(n=d._addEventHandler(e,o,n),jQuery.on(o,n)):(e.addEventListener=d._addEventListener,e.addEventListener(o,n))}}},_addEventListener:function(e,t){t._isCustom=!0,d._addEventHandler(this,e,t)},_addEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;a<i;a++){if(r[a]===n)return n;if(r[a].handler&&r[a].handler===n)return r[a]}return r.push(n),n},removeEventListener:function(e,t,n){if("string"!=typeof e){e._eventHandlers||(e._eventHandlers={});for(var r=(t=t.split(/,|\s/)).length,i=0;i<r;i++)for(var a=t[i],o=void 0===n?e._eventHandlers[a]||[]:[n],l=o.length,s=0;s<l;s++){n=o[s];e.removeEventListener?(n=d._removeEventHandler(e,a,n),e.removeEventListener(a,n)):e.detachEvent?(n=d._removeEventHandler(e,a,n),e.detachEvent("on"+a,n)):"undefined"!=typeof jQuery?(n=d._removeEventHandler(e,a,n),jQuery.off(a,n)):(e.removeEventListener=d._removeEventListener,e.removeEventListener(a,n))}}},_removeEventListener:function(e,t){for(var n=(e=e.split(/,|\s/)).length,r=0;r<n;r++)for(var i=e[r],a=void 0===t?this._eventHandlers[i]||[]:[t],o=a.length,l=0;l<o;l++){(t=a[l])._isCustom=!1,d._removeEventHandler(this,i,t)}},_removeEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;a<i;a++){if(r[a]===n)return r.splice(a,1)[0];if(r[a].handler&&r[a].handler===n)return r.splice(a,1)[0]}},dispatchEvent:function(e,t){e._eventHandlers||(e._eventHandlers={}),e.dispatchEvent?e.dispatchEvent(t):e.fireEvent?e.fireEvent("on"+type,t):"undefined"!=typeof jQuery?jQuery(e).trigger(jQuery.Event(t.type,{type:t.type,data:t.detail})):(e.dispatchEvent=d._dispatchEvent,e.dispatchEvent(t))},_dispatchEvent:function(e){d._dispatchEventHandlers(this,e)},_dispatchEventHandlers:function(e,t){var n=e._eventHandlers[t.type];if(n)for(var r=n.length,i=0;i<r;i++)n[i](t,t.detail)}}).Event,addEvents:d.addEvents,removeEvents:d.removeEvents,addEventListener:d.addEventListener,removeEventListener:d.removeEventListener,dispatchEvent:d.dispatchEvent},N={_singleton:null,_focusin_handlerStack:[],_keyup_handlerStack:[],_init:function(){var e=new window[I];for(var t in e.init(),e)window[I][t]=e[t];N._singleton=e},_destory:function(){N._singleton&&N._singleton.destroy(),N._singleton=null},_update:function(){N._singleton&&(N._singleton.classPrefix=window[I].classPrefix,N._singleton.container=window[I].container,N._singleton.pageWrap=window[I].pageWrap,N._singleton.requestCloseCallback=window[I].requestCloseCallback)},_addFocusin:function(e){var t=N._focusin_handlerStack,n=t.length;t.push(e),n||H.addEventListener(document,"focusin",N._handler_document_focusin)},_removeFocusin:function(e){for(var t=N._focusin_handlerStack,n=t.length,r=0;r<n;r++)if(t[r]===e){t.splice(r,1);break}t.length||H.removeEventListener(document,"focusin",N._handler_document_focusin)},_handler_document_focusin:function(e){var t=N._focusin_handlerStack,n=t.length;n&&t[n-1].call(this,e)},_addKeyup:function(e){var t=N._keyup_handlerStack,n=t.length;t.push(e),n||H.addEventListener(document,"keyup",N._handler_document_keyup)},_removeKeyup:function(e){for(var t=N._keyup_handlerStack,n=t.length,r=0;r<n;r++)if(t[r]===e){t.splice(r,1);break}t.length||H.removeEventListener(document,"keyup",N._handler_document_keyup)},_handler_document_keyup:function(e){var t=N._keyup_handlerStack,n=t.length;n&&t[n-1].call(this,e)}};window[I]=function(){var y={classPrefix:null,container:null,pageWrap:null,requestCloseCallback:null,_initialized:!1,_scopeElement:null,_container:null,_background:null,_content:null,_frame:null,_close:null,_showCallback:null,_hideCallback:null,_lastFocus:null,_immediate:!1},w={init:function(e){void 0===e&&(e=document.body||null),N._update();var t=document.createElement("div"),n=k.classPrefix?O.CLASS_CONTAINER.replace(D,k.classPrefix):O.CLASS_CONTAINER;t.setAttribute("class",n),y._container=t;var r=document.createElement("div"),i=k.classPrefix?O.CLASS_BACKGROUND.replace(D,k.classPrefix):O.CLASS_BACKGROUND;r.setAttribute("class",i),y._background=r;var a=document.createElement("div"),o=k.classPrefix?O.CLASS_FRAME.replace(D,k.classPrefix):O.CLASS_FRAME;a.setAttribute("class",o),y._frame=a;var l=document.createElement("button"),s=k.classPrefix?O.CLASS_CLOSE.replace(D,k.classPrefix):O.CLASS_CLOSE;if(l.setAttribute("class",s),l.setAttribute("type","button"),l.innerHTML="Close",y._close=l,a.appendChild(l),t.appendChild(r),t.appendChild(a),H.addEvents(k),e){(t=e.querySelector("["+O.DATA_CONTAINER+"]"))&&(k.container=t);var d=e.querySelector("["+O.DATA_PAGE_WRAP+"]");d&&(k.pageWrap=d);for(var c=e.querySelectorAll("["+O.DATA_TRIGGER+"]"),_=c.length,u=0;u<_;u++)k.addTrigger(c[u])}y._scopeElement=e,y._initialized=!0},destroy:function(){y._initialized=!1,N._removeFocusin(w._handler_document_focusin),N._removeKeyup(w._handler_document_keyup);var e=y._scopeElement;if(e)for(var t=e.querySelectorAll("["+O.DATA_TRIGGER+"]"),n=t.length,r=0;r<n;r++)k.removeTrigger(t[r]);y._scopeElement=null;var i=k.classPrefix?O.CLASS_BODY_VISIBLE.replace(D,k.classPrefix):O.CLASS_BODY_VISIBLE;F.removeClass(document.body,i),w._focusRestore(),w._resetContent(),y._showCallback=null,y._hideCallback=null,y._lastFocus=!1,y._immediate=!1,H.removeEvents(k);var a=y._close;a&&(H.removeEventListener(a,"click",w._handler_close_click),a.removeAttribute("disabled")),y._close=null,y._frame=null;var o=y._background;o&&H.removeEventListener(o,"click",w._handler_background_click),y._background=null;var l=y._container;l&&(l.setAttribute("class",""),l.parentNode&&l.parentNode.removeChild(l)),y._container=null},addTrigger:function(e,t){if(!(t=t||null))if(e.getAttribute(O.DATA_TRIGGER).length)t=e.getAttribute(O.DATA_TRIGGER);else{if(!e.hasAttribute("href"))throw new Error("Trigger must have "+O.DATA_TRIGGER+" or href");t=e.getAttribute("href")}H.addEventListener(e,"click",function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,k.show(t),!1})},removeTrigger:function(e){H.removeEventListener(e,"click")},show:function(e,t,n){if(!y._initialized)throw new Error(I+" is not initialized. To fix call init()");N._update();var r="string"==typeof e;r&&-1!=e.indexOf("#")&&(e=e.replace(/.*#/,"")),void 0===t&&(t={}),y._showCallback=n;var i,a,o,l,s=k.classPrefix?O.CLASS_BODY_VISIBLE.replace(D,k.classPrefix):O.CLASS_BODY_VISIBLE;if(F.addClass(document.body,s),H.dispatchEvent(k,new H.Event(k.EVENT_BEFORE_SHOW,{content:e.id||e})),null==y._content){if(!(e=r?document.getElementById(e):e))throw new Error("Invalid content");var d,c,_,u,v,E,f="",h=!0,A=!1,p=!1;void 0!==t.width?i=t.width:(d=e.getAttribute(O.DATA_WIDTH))&&d.length&&(i=d),void 0!==t.height?a=t.height:(c=e.getAttribute(O.DATA_HEIGHT))&&c.length&&(a=c),void 0!==t.offsetX?o=t.offsetX:(_=e.getAttribute(O.DATA_OFFSET_X))&&_.length&&(o=_),void 0!==t.offsetY?l=t.offsetY:(u=e.getAttribute(O.DATA_OFFSET_Y))&&u.length&&(l=u),void 0!==t.containerClass?f=t.containerClass:(v=e.getAttribute(O.DATA_CONTAINER_CLASS))&&v.length&&(f=v),void 0!==t.userClosable?h=!0===t.userClosable:e.hasAttribute(O.DATA_USER_CLOSABLE)&&(h="false"!==(e.getAttribute(O.DATA_USER_CLOSABLE)||"true").toLowerCase()),void 0!==t.autoFocus?A=!0===t.autoFocus:e.hasAttribute(O.DATA_AUTO_FOCUS)&&(A="false"!==(e.getAttribute(O.DATA_AUTO_FOCUS)||"true").toLowerCase()),void 0!==t.immediate?p=!0===t.immediate:e.hasAttribute(O.DATA_IMMEDIATE)&&(p=(E=e.getAttribute(O.DATA_IMMEDIATE)||"true")&&"false"!==E.toLowerCase());var m=y._container,C=y._background,g=y._frame,S=y._close,T=k.classPrefix?O.CLASS_CONTENT.replace(D,k.classPrefix):O.CLASS_CONTENT;if(F.addClass(e,T),e.setAttribute("tabindex","0"),e.hasAttribute("aria-label")||e.hasAttribute("aria-labelled-by")||e.setAttribute("aria-label",O.DEFAULT_ARIA_LABEL),e["_"+D+"data"]=e["_"+D+"data"]||{},void 0===i&&(i=void 0!==document.documentElement.currentStyle?e.currentStyle.width:window.getComputedStyle(e).width),parseInt(i)?(g.style.width=i,e["_"+D+"data"].width=i,e.style.width="100%"):g.style.width="",void 0===a&&(a=void 0!==document.documentElement.currentStyle?e.currentStyle.height:window.getComputedStyle(e).height),parseInt(a)?(g.style.height=a,e["_"+D+"data"].height=a,e.style.height="100%"):g.style.height="",g.style.left=void 0!==o?o:"",g.style.top=void 0!==l?l:"",y._content=e,h?(N._addKeyup(w._handler_document_keyup),H.addEventListener(C,"click",w._handler_background_click),H.addEventListener(S,"click",w._handler_close_click)):S.setAttribute("disabled","disabled"),e["_"+D+"data"].parent=e.parentNode,r&&e.parentNode.removeChild(e),g.insertBefore(e,S),!k.container){if(!document.body)throw new Error("Container is undefined");k.container=document.body}var L=k.container;k.container.length&&(L=k.container[0]),L.appendChild(m),w._focusTrap(L,e,A),F.addClass(m,f);var b=setTimeout(function(){clearTimeout(b);var e=k.classPrefix?O.CLASS_FRAME_VISIBLE.replace(D,k.classPrefix):O.CLASS_FRAME_VISIBLE;F.addClass(m,e)},50);!(y._immediate=p)&&(R.hasTransition(C)||R.hasTransition(g))?(R.offTransitionComplete(m),R.onTransitionComplete(m,w._handler_show_complete)):w._handler_show_complete()}else k.hide(function(){k.show(e,t,n)})},hide:function(e){if(!y._initialized)throw new Error(I+" is not initialized. To fix call init()");y._hideCallback=e;var t=y._content;H.dispatchEvent(k,new H.Event(k.EVENT_BEFORE_HIDE,{content:t.id||t})),N._removeFocusin(w._handler_document_focusin),N._removeKeyup(w._handler_document_keyup);var n=y._close;n&&(H.removeEventListener(n,"click",w._handler_close_click),n.removeAttribute("disabled"));var r=y._background;r&&H.removeEventListener(r,"click",w._handler_background_click);var i,a=y._frame,o=y._container;o&&(!y._immediate&&(R.hasTransition(r)||R.hasTransition(a))?(R.offTransitionComplete(o),R.onTransitionComplete(o,w._handler_hide_complete)):w._handler_hide_complete(),i=k.classPrefix?O.CLASS_FRAME_VISIBLE.replace(D,k.classPrefix):O.CLASS_FRAME_VISIBLE,F.removeClass(o,i))},_focusTrap:function(e,t,n){n=!0===n,N._addFocusin(w._handler_document_focusin),y._lastFocus=document.activeElement;var r=k.pageWrap;if(r){if(r.contains(e))throw"Error: The page wrapper ["+O.DATA_PAGE_WRAP+"] should not contain the container. They should be siblings instead.";r.setAttribute("aria-hidden","true"),r.setAttribute("tabindex","-1")}((n?t.querySelector(O.FOCUSABLE):null)||t).focus()},_focusRestore:function(){N._removeFocusin(w._handler_document_focusin);var e=k.pageWrap;e&&(e.removeAttribute("aria-hidden","true"),e.removeAttribute("tabindex","-1"));var t=y._lastFocus;t&&t.focus(),y._lastFocus=null},_resetContent:function(){var e,t,n=y._content;n&&(n.parentNode.removeChild(n),void 0!==(e=n["_"+D+"data"]).width&&(n.style.width=""),void 0!==e.height&&(n.style.height=""),void 0!==e.parent&&e.parent&&e.parent.appendChild(n),e=null,n.removeAttribute("tabindex"),t=k.classPrefix?O.CLASS_CONTENT.replace(D,k.classPrefix):O.CLASS_CONTENT,F.removeClass(n,t)),y._content=null},_handler_show_complete:function(){R.offTransitionComplete(y._container);var e=y._content;H.dispatchEvent(k,new H.Event(k.EVENT_AFTER_SHOW,{content:e.id||e}));var t=y._showCallback;void 0!==t&&(t(),y._showCallback=null)},_handler_hide_complete:function(){var e=y._container;R.offTransitionComplete(e);var t=y._content;w._resetContent();var n=k.classPrefix?O.CLASS_CONTAINER.replace(D,k.classPrefix):O.CLASS_CONTAINER;e.setAttribute("class",n),e.parentNode.removeChild(e),w._focusRestore();var r=k.classPrefix?O.CLASS_BODY_VISIBLE.replace(D,k.classPrefix):O.CLASS_BODY_VISIBLE;F.removeClass(document.body,r),H.dispatchEvent(k,new H.Event(k.EVENT_AFTER_HIDE,{content:t.id||t}));var i=y._hideCallback;void 0!==i&&(i(),y._hideCallback=null)},_handler_close_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,w._requestClose(),!1},_handler_background_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,w._requestClose(),!1},_handler_document_keyup:function(e){27==e.keyCode&&w._requestClose()},_requestClose:function(){var e,t;k.requestCloseCallback?(e=y._content,!1!==(t=k.requestCloseCallback(e.id||e))&&0!==t&&k.hide()):k.hide()},_handler_document_focusin:function(e){var t,n=e.target||e.srcElement,r=y._frame;n==r||r.contains(n)||(void 0!==e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,(t=y._content)&&t.focus())}},k={EVENT_BEFORE_SHOW:e,EVENT_AFTER_SHOW:t,EVENT_BEFORE_HIDE:n,EVENT_AFTER_HIDE:r,container:y.container,pageWrap:y.pageWrap,requestCloseCallback:y.requestCloseCallback,init:w.init,destroy:w.destroy,addTrigger:w.addTrigger,removeTrigger:w.removeTrigger,hide:w.hide,show:w.show};return k},N._init()}();