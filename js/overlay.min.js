/*
 * overlay v3.0.0 Copyright (c) 2020 AJ Savino
 * https://github.com/koga73/overlay
 * MIT License
 */
!function(){var s,D="Overlay",w=D.toLowerCase(),e="beforeshow",t="aftershow",n="beforehide",r="afterhide",k={ID_CONTAINER:w+"Container",ID_BACKGROUND:w+"Background",ID_FRAME:w+"Frame",ID_CLOSE:w+"Close",CLASS_FRAME_VISIBLE:"visible",CLASS_BODY_VISIBLE:w+"-visible",CLASS_CONTENT:w+"-content",DATA_CONTAINER:"data-"+w+"-container",DATA_PAGE_WRAP:"data-"+w+"-page-wrap",DATA_TRIGGER:"data-"+w+"-trigger",DATA_WIDTH:"data-"+w+"-width",DATA_HEIGHT:"data-"+w+"-height",DATA_OFFSET_X:"data-"+w+"-offset-x",DATA_OFFSET_Y:"data-"+w+"-offset-y",DATA_CONTAINER_CLASS:"data-"+w+"-container-class",DATA_USER_CLOSABLE:"data-"+w+"-user-closable",DATA_AUTO_FOCUS:"data-"+w+"-auto-focus",DATA_IMMEDIATE:"data-"+w+"-immediate",FOCUSABLE:"a[href],input,select,textarea,button,[tabindex]",DEFAULT_ARIA_LABEL:D},I=function(){for(var n=null,t=null,e=[["webkitTransition","webkitTransitionEnd","-webkit-"],["transition","transitionend",""]],r=e.length,i=0;i<r&&void 0===document.documentElement.style[e[i][0]];i++);return i!=r&&(n=e[i][1],t=e[i][2]),{hasTransition:function(e){return void 0!==document.documentElement.currentStyle?0<parseFloat(e.currentStyle[t+"transition-duration"]):0<parseFloat(window.getComputedStyle(e)[t+"transition-duration"])},onTransitionComplete:function(e,t){n?F.addEventListener(e,n,t):t()},offTransitionComplete:function(e,t){n&&(void 0!==t?F.removeEventListener(e,n,t):F.removeEventListener(e,n))}}}(),H=("function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{addClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");for(var r in t=t.split(" "))n.push(t[r].trim());e.setAttribute("class",n.join(" ").trim())},removeClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");for(var r in t=t.split(" "))for(var i=n.length,a=0;a<i;a++)n[a]==t[r].trim()&&(n.splice(a,1),i--,a--);e.setAttribute("class",n.join(" ").trim())},hasClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");t=t.split(" ");var r=0;for(var i in t)for(var a=n.length,o=0;o<a;o++)if(n[o]==t[i].trim()){r++;break}return r==t.length}}),F={Event:(s={Event:function(t,e){var n=null;try{n=new CustomEvent(t,{detail:e})}catch(e){"undefined"!=typeof document&&document.createEventObject?(n=document.createEventObject("Event")).initCustomEvent&&n.initCustomEvent(t,!0,!0):n={}}return n.type=t,n.detail=e,n},addEvents:function(e,t){return t=!0===t,e._eventHandlers||(e._eventHandlers={}),e.addEventListener||(e.addEventListener=s._addEventListener,t||(e.on=s._addEventListener)),e.removeEventListener||(e.removeEventListener=s._removeEventListener,t||(e.off=s._removeEventListener)),e.dispatchEvent||(e.dispatchEvent=s._dispatchEvent,t||(e.trigger=s._dispatchEvent,e.emit=s._dispatchEvent)),e},removeEvents:function(e,t){return t=!0===t,e._eventHandlers&&delete e._eventHandlers,e.addEventListener&&(delete e.addEventListener,t||delete e.on),e.removeEventListener&&(delete e.removeEventListener,t||delete e.off),e.dispatchEvent&&(delete e.dispatchEvent,t||(delete e.trigger,delete e.emit)),e},addEventListener:function(e,t,n){if("string"!=typeof e){e._eventHandlers||(e._eventHandlers={});for(var r=(t=t.split(/,|\s/)).length,i=0;i<r;i++){var a,o=t[i];e.addEventListener?(n=s._addEventHandler(e,o,n),e.addEventListener(o,n)):e.attachEvent?((a=function(){n(window.event)}).handler=n,a=s._addEventHandler(e,o,a),e.attachEvent("on"+o,a)):"undefined"!=typeof jQuery?(n=s._addEventHandler(e,o,n),jQuery.on(o,n)):(e.addEventListener=s._addEventListener,e.addEventListener(o,n))}}},_addEventListener:function(e,t){t._isCustom=!0,s._addEventHandler(this,e,t)},_addEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;a<i;a++){if(r[a]===n)return n;if(r[a].handler&&r[a].handler===n)return r[a]}return r.push(n),n},removeEventListener:function(e,t,n){if("string"!=typeof e){e._eventHandlers||(e._eventHandlers={});for(var r=(t=t.split(/,|\s/)).length,i=0;i<r;i++)for(var a=t[i],o=void 0===n?e._eventHandlers[a]||[]:[n],d=o.length,l=0;l<d;l++){n=o[l];e.removeEventListener?(n=s._removeEventHandler(e,a,n),e.removeEventListener(a,n)):e.detachEvent?(n=s._removeEventHandler(e,a,n),e.detachEvent("on"+a,n)):"undefined"!=typeof jQuery?(n=s._removeEventHandler(e,a,n),jQuery.off(a,n)):(e.removeEventListener=s._removeEventListener,e.removeEventListener(a,n))}}},_removeEventListener:function(e,t){for(var n=(e=e.split(/,|\s/)).length,r=0;r<n;r++)for(var i=e[r],a=void 0===t?this._eventHandlers[i]||[]:[t],o=a.length,d=0;d<o;d++){(t=a[d])._isCustom=!1,s._removeEventHandler(this,i,t)}},_removeEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;a<i;a++){if(r[a]===n)return r.splice(a,1)[0];if(r[a].handler&&r[a].handler===n)return r.splice(a,1)[0]}},dispatchEvent:function(e,t){e._eventHandlers||(e._eventHandlers={}),e.dispatchEvent?e.dispatchEvent(t):e.fireEvent?e.fireEvent("on"+type,t):"undefined"!=typeof jQuery?jQuery(e).trigger(jQuery.Event(t.type,{type:t.type,data:t.detail})):(e.dispatchEvent=s._dispatchEvent,e.dispatchEvent(t))},_dispatchEvent:function(e){s._dispatchEventHandlers(this,e)},_dispatchEventHandlers:function(e,t){var n=e._eventHandlers[t.type];if(n)for(var r=n.length,i=0;i<r;i++)n[i](t,t.detail)}}).Event,addEvents:s.addEvents,removeEvents:s.removeEvents,addEventListener:s.addEventListener,removeEventListener:s.removeEventListener,dispatchEvent:s.dispatchEvent},O={_singleton:null,_focusin_handlerStack:[],_keyup_handlerStack:[],_init:function(){var e=new window[D];for(var t in e.init(),e)window[D][t]=e[t];O._singleton=e},_destory:function(){O._singleton&&O._singleton.destroy(),O._singleton=null},_addFocusin:function(e){var t=O._focusin_handlerStack,n=t.length;t.push(e),n||F.addEventListener(document,"focusin",O._handler_document_focusin)},_removeFocusin:function(e){for(var t=O._focusin_handlerStack,n=t.length,r=0;r<n;r++)t[r]===e&&t.splice(r,1);t.length||F.removeEventListener(document,"focusin",O._handler_document_focusin)},_handler_document_focusin:function(e){var t=O._focusin_handlerStack,n=t.length;n&&t[n-1].call(this,e)},_addKeyup:function(e){var t=O._keyup_handlerStack,n=t.length;t.push(e),n||F.addEventListener(document,"keyup",O._handler_document_keyup)},_removeKeyup:function(e){for(var t=O._keyup_handlerStack,n=t.length,r=0;r<n;r++)t[r]===e&&t.splice(r,1);t.length||F.removeEventListener(document,"keyup",O._handler_document_keyup)},_handler_document_keyup:function(e){var t=O._keyup_handlerStack,n=t.length;n&&t[n-1].call(this,e)}};window[D]=function(){var y={container:null,pageWrap:null,_initialized:!1,_scopeElement:null,_container:null,_background:null,_content:null,_frame:null,_close:null,_showCallback:null,_hideCallback:null,_lastFocus:null,_immediate:!1},L={init:function(e){void 0===e&&(e=document.body||null);var t=document.createElement("div");t.setAttribute("id",k.ID_CONTAINER),y._container=t;var n=document.createElement("div");n.setAttribute("id",k.ID_BACKGROUND),y._background=n;var r=document.createElement("div");r.setAttribute("id",k.ID_FRAME),y._frame=r;var i=document.createElement("button");if(i.setAttribute("id",k.ID_CLOSE),i.setAttribute("type","button"),i.innerHTML="Close",y._close=i,r.appendChild(i),t.appendChild(n),t.appendChild(r),F.addEvents(S),e){(t=e.querySelector("["+k.DATA_CONTAINER+"]"))&&(S.container=t);var a=e.querySelector("["+k.DATA_PAGE_WRAP+"]");a&&(S.pageWrap=a);for(var o=e.querySelectorAll("["+k.DATA_TRIGGER+"]"),d=o.length,l=0;l<d;l++)S.addTrigger(o[l])}y._scopeElement=e,y._initialized=!0},destroy:function(){y._initialized=!1,O._removeFocusin(L._handler_document_focusin),O._removeKeyup(L._handler_document_keyup);var e=y._scopeElement;if(e)for(var t=e.querySelectorAll("["+k.DATA_TRIGGER+"]"),n=t.length,r=0;r<n;r++)S.removeTrigger(t[r]);y._scopeElement=null,H.removeClass(document.body,k.CLASS_BODY_VISIBLE),L._focusRestore(),L._resetContent(),y._showCallback=null,y._hideCallback=null,y._lastFocus=!1,y._immediate=!1,F.removeEvents(S);var i=y._close;i&&(F.removeEventListener(i,"click",L._handler_close_click),i.removeAttribute("disabled")),y._close=null,y._frame=null;var a=y._background;a&&F.removeEventListener(a,"click",L._handler_background_click),y._background=null;var o=y._container;o&&(o.setAttribute("class",""),o.parentNode&&o.parentNode.removeChild(o)),y._container=null},addTrigger:function(e,t){if(!(t=t||null))if(e.getAttribute(k.DATA_TRIGGER).length)t=e.getAttribute(k.DATA_TRIGGER);else{if(!e.hasAttribute("href"))throw new Error("Trigger must have "+k.DATA_TRIGGER+" or href");t=e.getAttribute("href")}F.addEventListener(e,"click",function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,S.show(t),!1})},removeTrigger:function(e){F.removeEventListener(e,"click")},show:function(e,t,n){if(!y._initialized)throw new Error(D+" is not initialized. To fix call init()");var r,i,a,o,d="string"==typeof e;if(d&&-1!=e.indexOf("#")&&(e=e.replace(/.*#/,"")),void 0===t&&(t={}),y._showCallback=n,H.addClass(document.body,k.CLASS_BODY_VISIBLE),F.dispatchEvent(S,new F.Event(S.EVENT_BEFORE_SHOW,{content:e.id||e})),null==y._content){if(!(e=d?document.getElementById(e):e))throw new Error("Invalid content");var l,s,_,c,u,v,E="",h=!0,f=!0,m=!1;void 0!==t.width?r=t.width:(l=e.getAttribute(k.DATA_WIDTH))&&l.length&&(r=l),void 0!==t.height?i=t.height:(s=e.getAttribute(k.DATA_HEIGHT))&&s.length&&(i=s),void 0!==t.offsetX?a=t.offsetX:(_=e.getAttribute(k.DATA_OFFSET_X))&&_.length&&(a=_),void 0!==t.offsetY?o=t.offsetY:(c=e.getAttribute(k.DATA_OFFSET_Y))&&c.length&&(o=c),void 0!==t.containerClass?E=t.containerClass:(u=e.getAttribute(k.DATA_CONTAINER_CLASS))&&u.length&&(E=u),void 0!==t.userClosable?h=!0===t.userClosable:e.hasAttribute(k.DATA_USER_CLOSABLE)&&(h="false"!==(e.getAttribute(k.DATA_USER_CLOSABLE)||"true").toLowerCase()),void 0!==t.autoFocus?f=!0===t.autoFocus:e.hasAttribute(k.DATA_AUTO_FOCUS)&&(f="false"!==(e.getAttribute(k.DATA_AUTO_FOCUS)||"true").toLowerCase()),void 0!==t.immediate?m=!0===t.immediate:e.hasAttribute(k.DATA_IMMEDIATE)&&(m=(v=e.getAttribute(k.DATA_IMMEDIATE)||"true")&&"false"!==v.toLowerCase());var p=y._container,A=y._background,g=y._frame,T=y._close;if(H.addClass(e,k.CLASS_CONTENT),e.setAttribute("tabindex","0"),e.hasAttribute("aria-label")||e.hasAttribute("aria-labelled-by")||e.setAttribute("aria-label",k.DEFAULT_ARIA_LABEL),e["_"+w+"Data"]=e["_"+w+"Data"]||{},void 0===r&&(r=void 0!==document.documentElement.currentStyle?e.currentStyle.width:window.getComputedStyle(e).width),parseInt(r)?(g.style.width=r,e["_"+w+"Data"].width=r,e.style.width="100%"):g.style.width="",void 0===i&&(i=void 0!==document.documentElement.currentStyle?e.currentStyle.height:window.getComputedStyle(e).height),parseInt(i)?(g.style.height=i,e["_"+w+"Data"].height=i,e.style.height="100%"):g.style.height="",g.style.left=void 0!==a?a:"",g.style.top=void 0!==o?o:"",y._content=e,h?(O._addKeyup(L._handler_document_keyup),F.addEventListener(A,"click",L._handler_background_click),F.addEventListener(T,"click",L._handler_close_click)):T.setAttribute("disabled","disabled"),e["_"+w+"Data"].parent=e.parentNode,d&&e.parentNode.removeChild(e),g.insertBefore(e,T),!S.container){if(!document.body)throw new Error("Container is undefined");S.container=document.body}var b=S.container;S.container.length&&(b=S.container[0]),b.appendChild(p),L._focusTrap(b,e,f),H.addClass(p,E);var C=setTimeout(function(){clearTimeout(C),H.addClass(p,k.CLASS_FRAME_VISIBLE)},50);!(y._immediate=m)&&(I.hasTransition(A)||I.hasTransition(g))?(I.offTransitionComplete(p),I.onTransitionComplete(p,L._handler_show_complete)):L._handler_show_complete()}else S.hide(function(){S.show(e,t,n)})},hide:function(e){if(!y._initialized)throw new Error(D+" is not initialized. To fix call init()");y._hideCallback=e;var t=y._content;F.dispatchEvent(S,new F.Event(S.EVENT_BEFORE_HIDE,{content:t.id||t})),O._removeFocusin(L._handler_document_focusin),O._removeKeyup(L._handler_document_keyup);var n=y._close;n&&(F.removeEventListener(n,"click",L._handler_close_click),n.removeAttribute("disabled"));var r=y._background;r&&F.removeEventListener(r,"click",L._handler_background_click);var i=y._frame,a=y._container;a&&(!y._immediate&&(I.hasTransition(r)||I.hasTransition(i))?(I.offTransitionComplete(a),I.onTransitionComplete(a,L._handler_hide_complete)):L._handler_hide_complete(),H.removeClass(a,k.CLASS_FRAME_VISIBLE))},_focusTrap:function(e,t,n){n=!0===n,O._addFocusin(L._handler_document_focusin),y._lastFocus=document.activeElement;var r=S.pageWrap;if(r){if(r.contains(e))throw"Error: The page wrapper ["+k.DATA_PAGE_WRAP+"] should not contain the modal container. They should be siblings instead.";r.setAttribute("aria-hidden","true"),r.setAttribute("tabindex","-1")}((n?t.querySelector(k.FOCUSABLE):null)||t).focus()},_focusRestore:function(){O._removeFocusin(L._handler_document_focusin);var e=S.pageWrap;e&&(e.removeAttribute("aria-hidden","true"),e.removeAttribute("tabindex","-1"));var t=y._lastFocus;t&&t.focus(),y._lastFocus=null},_resetContent:function(){var e,t=y._content;t&&(t.parentNode.removeChild(t),void 0!==(e=t["_"+w+"Data"]).width&&(t.style.width=""),void 0!==e.height&&(t.style.height=""),void 0!==e.parent&&e.parent&&e.parent.appendChild(t),e=null,t.removeAttribute("tabindex"),H.removeClass(t,k.CLASS_CONTENT)),y._content=null},_handler_show_complete:function(){I.offTransitionComplete(y._container);var e=y._content;F.dispatchEvent(S,new F.Event(S.EVENT_AFTER_SHOW,{content:e.id||e}));var t=y._showCallback;void 0!==t&&(t(),y._showCallback=null)},_handler_hide_complete:function(){var e=y._container;I.offTransitionComplete(e);var t=y._content;L._resetContent(),e.setAttribute("class",""),e.parentNode.removeChild(e),L._focusRestore(),H.removeClass(document.body,k.CLASS_BODY_VISIBLE),F.dispatchEvent(S,new F.Event(S.EVENT_AFTER_HIDE,{content:t.id||t}));var n=y._hideCallback;void 0!==n&&(n(),y._hideCallback=null)},_handler_close_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,S.hide(),!1},_handler_background_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,S.hide(),!1},_handler_document_keyup:function(e){27==e.keyCode&&S.hide()},_handler_document_focusin:function(e){var t,n=e.target||e.srcElement,r=y._frame;n==r||r.contains(n)||(void 0!==e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,(t=y._content)&&t.focus())}},S={EVENT_BEFORE_SHOW:e,EVENT_AFTER_SHOW:t,EVENT_BEFORE_HIDE:n,EVENT_AFTER_HIDE:r,container:y.container,pageWrap:y.pageWrap,init:L.init,destroy:L.destroy,addTrigger:L.addTrigger,removeTrigger:L.removeTrigger,hide:L.hide,show:L.show};return S},O._init()}();