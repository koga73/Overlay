/*
* Overlay v1.1.3 Copyright (c) 2015 AJ Savino
* MIT LICENSE
*/
var Overlay=function(){var e,t={EVENT_BEFORE_SHOW:"beforeshow",EVENT_AFTER_SHOW:"aftershow",EVENT_BEFORE_HIDE:"beforehide",EVENT_AFTER_HIDE:"afterhide"},n={_container:null,_background:null,_content:null,_frame:null,_close:null},r={initialize:function(){var e=document.createElement("div");e.setAttribute("id","overlayContainer"),n._container=e;var t=document.createElement("div");t.setAttribute("id","overlayBackground"),n._background=t;var r=document.createElement("div");r.setAttribute("id","overlayFrame"),n._frame=r;var a=document.createElement("button");a.setAttribute("id","overlayClose"),n._close=a,r.appendChild(a),e.appendChild(t),e.appendChild(r)},destroy:function(){var e=n._close;e&&OOP.removeEventListener(e,"click",r._handler_close_clicked),n._close=null,n._frame=null;var t=n._content;t&&(t.parentNode.removeChild(t),"undefined"!=typeof t._overlayData.width&&(t.style.width=t._overlayData.width),"undefined"!=typeof t._overlayData.height&&(t.style.height=t._overlayData.height),"undefined"!=typeof t._overlayData.parent&&t._overlayData.parent.appendChild(t),t._overlayData=null),n._content=null;var a=n._background;a&&OOP.removeEventListener(a,"click",r._handler_background_click),n._background=null;var i=n._container;i&&i.parentNode&&(i.setAttribute("class",""),i.parentNode.removeChild(i)),n._container=null},show:function(t,a){null!=n._content&&e.hide(),OOP.dispatchEvent(e,new OOP.Event(e.EVENT_BEFORE_SHOW));var i,d,o,l,v="";"undefined"!=typeof a&&("undefined"!=typeof a.width&&(i=a.width),"undefined"!=typeof a.height&&(d=a.height),"undefined"!=typeof a.offsetX&&(o=a.offsetX),"undefined"!=typeof a.offsetY&&(l=a.offsetY),"undefined"!=typeof a.containerClass&&(v=a.containerClass));var s=n._container,_=n._background,c=n._frame,E=n._close,u=document.getElementById(t);u._overlayData=u._overlayData||{},"undefined"==typeof i&&(i="undefined"!=typeof document.documentElement.currentStyle?u.currentStyle.width:window.getComputedStyle(u).width),parseInt(i)?(c.style.width=i,u._overlayData.width=i,u.style.width="100%"):c.style.width="","undefined"==typeof d&&(d="undefined"!=typeof document.documentElement.currentStyle?u.currentStyle.height:window.getComputedStyle(u).height),parseInt(d)?(c.style.height=d,u._overlayData.height=d,u.style.height="100%"):c.style.height="",c.style.left="undefined"!=typeof o?o:"",c.style.top="undefined"!=typeof l?l:"",n._content=u,OOP.addEventListener(_,"click",r._handler_background_click),OOP.addEventListener(E,"click",r._handler_close_clicked),u._overlayData.parent=u.parentNode,u.parentNode.removeChild(u),c.appendChild(u),document.body.appendChild(s),s.setAttribute("class",v);var f=setTimeout(function(){clearTimeout(f),s.setAttribute("class",v+" visible")},50);OOP.dispatchEvent(e,new OOP.Event(e.EVENT_AFTER_SHOW))},hide:function(){OOP.dispatchEvent(e,new OOP.Event(e.EVENT_BEFORE_HIDE));var t=n._close;t&&OOP.removeEventListener(t,"click",r._handler_close_clicked);var i=n._background;i&&OOP.removeEventListener(i,"click",r._handler_background_click);var d=n._container;if(d){a.onTransitionComplete(d,function(){a.offTransitionComplete(d);var t=n._content;t&&(t.parentNode.removeChild(t),"undefined"!=typeof t._overlayData.width&&(t.style.width=t._overlayData.width),"undefined"!=typeof t._overlayData.height&&(t.style.height=t._overlayData.height),"undefined"!=typeof t._overlayData.parent&&t._overlayData.parent.appendChild(t),t._overlayData=null),n._content=null,d.setAttribute("class",""),d.parentNode.removeChild(d),OOP.dispatchEvent(e,new OOP.Event(e.EVENT_AFTER_HIDE))});var o=d.getAttribute("class");o=o.substr(0,o.length-"visible".length),d.setAttribute("class",o)}},_handler_close_clicked:function(){return e.hide(),!1},_handler_background_click:function(){return e.hide(),!1}},a=function(){for(var e=null,t=[["transition","transitionend"],["webkitTransition","webkitTransitionEnd"]],n=t.length,r=0;n>r&&"undefined"==typeof document.documentElement.style[t[r][0]];r++);return r!=n&&(e=t[r][1]),{onTransitionComplete:function(t,n){e?OOP.addEventListener(t,e,n):n()},offTransitionComplete:function(t,n){e&&("undefined"!=typeof n?OOP.removeEventListener(t,e,n):OOP.removeEventListener(t,e))}}}();return e={EVENT_BEFORE_SHOW:t.EVENT_BEFORE_SHOW,EVENT_AFTER_SHOW:t.EVENT_AFTER_SHOW,EVENT_BEFORE_HIDE:t.EVENT_BEFORE_HIDE,EVENT_AFTER_HIDE:t.EVENT_AFTER_HIDE,initialize:r.initialize,destroy:r.destroy,hide:r.hide,show:r.show}}();if(!OOP)var OOP=function(){var e={event:function(e,t){var n=null;try{n=new CustomEvent(e)}catch(r){document.createEventObject?(n=document.createEventObject("Event"),n.initCustomEvent&&n.initCustomEvent(e,!0,!0)):n={}}return n._type=e,n._data=t,n},addEventListener:function(t,n,r){t._eventHandlers||(t._eventHandlers={}),n=n.split(",");for(var a=n.length,i=0;a>i;i++){var d=n[i];if(t.addEventListener)r=e._addEventHandler(t,d,r),t.addEventListener(d,r);else if(t.attachEvent){var o=function(){r(window.event)};o.handler=r,o=e._addEventHandler(t,d,o),t.attachEvent("on"+d,o)}else"undefined"!=typeof jQuery?(r=e._addEventHandler(t,d,r),jQuery.on(d,r)):(t.addEventListener=e._addEventListener,t.addEventListener(d,r))}},_addEventListener:function(t,n){n._isCustom=!0,e._addEventHandler(this,t,n)},_addEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],a=r.length,i=0;a>i;i++){if(r[i]===n)return n;if(r[i].handler&&r[i].handler===n)return r[i]}return r.push(n),n},removeEventListener:function(t,n,r){t._eventHandlers||(t._eventHandlers={}),n=n.split(",");for(var a=n.length,i=0;a>i;i++){var d,o=n[i];d="undefined"==typeof r?t._eventHandlers[o]:[r];for(var l=d.length,v=0;l>v;v++){var r=d[v];t.removeEventListener?(r=e._removeEventHandler(t,o,r),t.removeEventListener(o,r)):t.detachEvent?(r=e._removeEventHandler(t,o,r),t.detachEvent("on"+o,r)):"undefined"!=typeof jQuery?(r=e._removeEventHandler(t,o,r),jQuery.off(o,r)):(t.removeEventListener=e._removeEventListener,t.removeEventListener(o,r))}}},_removeEventListener:function(t,n){t=t.split(",");for(var r=t.length,a=0;r>a;a++){var i,d=t[a];i="undefined"==typeof n?this._eventHandlers[d]:[n];for(var o=i.length,l=0;o>l;l++){var n=i[l];n._isCustom=!1,e._removeEventHandler(this,d,n)}}},_removeEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],a=r.length,i=0;a>i;i++){if(r[i]===n)return r.splice(i,1)[0];if(r[i].handler&&r[i].handler===n)return r.splice(i,1)[0]}},dispatchEvent:function(t,n){t._eventHandlers||(t._eventHandlers={}),t.dispatchEvent?t.dispatchEvent(n):t.fireEvent?t.fireEvent("on"+type,n):"undefined"!=typeof jQuery?jQuery(t).trigger(jQuery.Event(n._type,{_type:n._type,_data:n._data})):(t.dispatchEvent=e._dispatchEvent,t.dispatchEvent(n))},_dispatchEvent:function(t){e._dispatchEventHandlers(this,t)},_dispatchEventHandlers:function(e,t){var n=e._eventHandlers[t._type];if(n)for(var r=n.length,a=0;r>a;a++)n[a](t)}};return{Event:e.event,addEventListener:e.addEventListener,removeEventListener:e.removeEventListener,dispatchEvent:e.dispatchEvent}}();Overlay.initialize();