/*
* Overlay v1.1.1 Copyright (c) 2015 AJ Savino
* MIT LICENSE
*/
var Overlay=function(){var e,t={EVENT_BEFORE_SHOW:"beforeshow",EVENT_AFTER_SHOW:"aftershow",EVENT_BEFORE_HIDE:"beforehide",EVENT_AFTER_HIDE:"afterhide"},n={_hiddenContainer:null,_container:null,_background:null,_content:null,_frame:null,_close:null},r={initialize:function(e){n._hiddenContainer=document.getElementById(e);var t=document.createElement("div");t.setAttribute("id","overlayContainer"),n._container=t;var r=document.createElement("div");r.setAttribute("id","overlayBackground"),n._background=r;var i=document.createElement("div");i.setAttribute("id","overlayFrame"),n._frame=i;var a=document.createElement("button");a.setAttribute("id","overlayClose"),n._close=a,i.appendChild(a),t.appendChild(r),t.appendChild(i)},destroy:function(){n._hiddenContainer=null;var e=n._close;e&&OOP.removeEventListener(e,"click",r._handler_close_clicked),n._close=null;var t=n._frame;t&&(t.style.marginTop="",t.style.marginLeft="",t.style.width="",t.style.height=""),n._frame=null;var i=n._content;i&&("undefined"!=typeof i.overlayData.width&&(i.style.width=i.overlayData.width),"undefined"!=typeof i.overlayData.height&&(i.style.height=i.overlayData.height),i.overlayData=null,i.parentNode.removeChild(i),hiddenContainer.appendChild(i)),n._content=null;var a=n._background;a&&OOP.removeEventListener(a,"click",r._handler_background_click),n._background=null;var d=n._container;d&&d.parentNode&&(d.setAttribute("class",""),d.parentNode.removeChild(d)),n._container=null},show:function(t,i){null!=n._content&&e.hide(),OOP.dispatchEvent(e,new OOP.Event(e.EVENT_BEFORE_SHOW));var a,d,o,l,v="";"undefined"!=typeof i&&("undefined"!=typeof i.width&&(a=i.width),"undefined"!=typeof i.height&&(d=i.height),"undefined"!=typeof i.offsetX&&(o=i.offsetX),"undefined"!=typeof i.offsetY&&(l=i.offsetY),"undefined"!=typeof i.containerClass&&(v=i.containerClass));var s=(n._hiddenContainer,n._container),c=n._background,E=n._frame,_=n._close,u=document.getElementById(t);u.overlayData=u.overlayData||{},"undefined"==typeof a&&(a="undefined"!=typeof document.documentElement.currentStyle?u.currentStyle.width:window.getComputedStyle(u).width),parseInt(a)&&(E.style.width=a,u.overlayData.width=a,u.style.width="100%"),"undefined"==typeof d&&(d="undefined"!=typeof document.documentElement.currentStyle?u.currentStyle.height:window.getComputedStyle(u).height),parseInt(d)&&(E.style.height=d,u.overlayData.height=d,u.style.height="100%"),"undefined"!=typeof o&&(E.style.left=o),"undefined"!=typeof l&&(E.style.top=l),n._content=u,OOP.addEventListener(c,"click",r._handler_background_click),OOP.addEventListener(_,"click",r._handler_close_clicked),E.appendChild(u),document.body.appendChild(s),s.setAttribute("class",v);var h=setTimeout(function(){clearTimeout(h),s.setAttribute("class",v+" visible")},50);OOP.dispatchEvent(e,new OOP.Event(e.EVENT_AFTER_SHOW))},hide:function(){OOP.dispatchEvent(e,new OOP.Event(e.EVENT_BEFORE_HIDE));var t=n._close;t&&OOP.removeEventListener(t,"click",r._handler_close_clicked);var a=n._background;a&&OOP.removeEventListener(a,"click",r._handler_background_click);var d=n._container;if(d){i.onTransitionComplete(d,function(){i.offTransitionComplete(d);var t=n._frame;t&&(t.style.marginTop="",t.style.marginLeft="",t.style.width="",t.style.height="");var r=n._content;r&&("undefined"!=typeof r.overlayData.width&&(r.style.width=r.overlayData.width),"undefined"!=typeof r.overlayData.height&&(r.style.height=r.overlayData.height),r.overlayData=null,r.parentNode.removeChild(r),n._hiddenContainer.appendChild(r)),n._content=null,d.setAttribute("class",""),d.parentNode.removeChild(d),OOP.dispatchEvent(e,new OOP.Event(e.EVENT_AFTER_HIDE))});var o=d.getAttribute("class");o=o.substr(0,o.length-"visible".length),d.setAttribute("class",o)}},_handler_close_clicked:function(){return e.hide(),!1},_handler_background_click:function(){return e.hide(),!1}},i=function(){for(var e=null,t=[["transition","transitionend"],["webkitTransition","webkitTransitionEnd"]],n=t.length,r=0;n>r&&"undefined"==typeof document.documentElement.style[t[r][0]];r++);return r!=n&&(e=t[r][1]),{onTransitionComplete:function(t,n){e?OOP.addEventListener(t,e,n):n()},offTransitionComplete:function(t,n){e&&("undefined"!=typeof n?OOP.removeEventListener(t,e,n):OOP.removeEventListener(t,e))}}}();return e={EVENT_BEFORE_SHOW:t.EVENT_BEFORE_SHOW,EVENT_AFTER_SHOW:t.EVENT_AFTER_SHOW,EVENT_BEFORE_HIDE:t.EVENT_BEFORE_HIDE,EVENT_AFTER_HIDE:t.EVENT_AFTER_HIDE,initialize:r.initialize,destroy:r.destroy,hide:r.hide,show:r.show}}();if(!OOP)var OOP=function(){var e={event:function(e,t){var n=null;try{n=new CustomEvent(e)}catch(r){document.createEventObject?(n=document.createEventObject("Event"),n.initCustomEvent&&n.initCustomEvent(e,!0,!0)):n={}}return n._type=e,n._data=t,n},addEventListener:function(t,n,r){t._eventHandlers||(t._eventHandlers={}),n=n.split(",");for(var i=n.length,a=0;i>a;a++){var d=n[a];if(t.addEventListener)r=e._addEventHandler(t,d,r),t.addEventListener(d,r);else if(t.attachEvent){var o=function(){r(window.event)};o.handler=r,o=e._addEventHandler(t,d,o),t.attachEvent("on"+d,o)}else t.addEventListener=e._addEventListener,t.addEventListener(d,r)}},_addEventListener:function(t,n){n._isCustom=!0,e._addEventHandler(this,t,n)},_addEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;i>a;a++){if(r[a]===n)return n;if(r[a].handler&&r[a].handler===n)return r[a]}return r.push(n),n},removeEventListener:function(t,n,r){t._eventHandlers||(t._eventHandlers={}),n=n.split(",");for(var i=n.length,a=0;i>a;a++){var d,o=n[a];d="undefined"==typeof r?t._eventHandlers[o]:[r];for(var l=d.length,v=0;l>v;v++){var r=d[v];t.removeEventListener?(r=e._removeEventHandler(t,o,r),t.removeEventListener(o,r)):t.detachEvent?(r=e._removeEventHandler(t,o,r),t.detachEvent("on"+o,r)):(t.removeEventListener=e._removeEventListener,t.removeEventListener(o,r))}}},_removeEventListener:function(t,n){t=t.split(",");for(var r=t.length,i=0;r>i;i++){var a,d=t[i];a="undefined"==typeof n?this._eventHandlers[d]:[n];for(var o=a.length,l=0;o>l;l++){var n=a[l];n._isCustom=!1,e._removeEventHandler(this,d,n)}}},_removeEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;i>a;a++){if(r[a]===n)return r.splice(a,1)[0];if(r[a].handler&&r[a].handler===n)return r.splice(a,1)[0]}},dispatchEvent:function(t,n){t._eventHandlers||(t._eventHandlers={}),t.dispatchEvent?t.dispatchEvent(n):t.fireEvent?t.fireEvent("on"+type,n):(t.dispatchEvent=e._dispatchEvent,t.dispatchEvent(n))},_dispatchEvent:function(t){e._dispatchEventHandlers(this,t)},_dispatchEventHandlers:function(e,t){var n=e._eventHandlers[t._type];if(n)for(var r=n.length,i=0;r>i;i++)n[i](t)}};return{Event:e.event,addEventListener:e.addEventListener,removeEventListener:e.removeEventListener,dispatchEvent:e.dispatchEvent}}();