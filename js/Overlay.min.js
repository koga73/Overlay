/*
* Overlay v1.1.6 Copyright (c) 2015 AJ Savino
* MIT LICENSE
*/
var Overlay=function(){var e,t={EVENT_BEFORE_SHOW:"beforeshow",EVENT_AFTER_SHOW:"aftershow",EVENT_BEFORE_HIDE:"beforehide",EVENT_AFTER_HIDE:"afterhide"},n={_container:null,_background:null,_content:null,_frame:null,_close:null},r={initialize:function(){var e=document.createElement("div");e.setAttribute("id","overlayContainer"),n._container=e;var t=document.createElement("div");t.setAttribute("id","overlayBackground"),n._background=t;var r=document.createElement("div");r.setAttribute("id","overlayFrame"),n._frame=r;var i=document.createElement("button");i.setAttribute("id","overlayClose"),n._close=i,r.appendChild(i),e.appendChild(t),e.appendChild(r)},destroy:function(){var e=n._close;e&&OOP.removeEventListener(e,"click",r._handler_close_clicked),n._close=null,n._frame=null;var t=n._content;t&&(t.parentNode.removeChild(t),"undefined"!=typeof t._overlayData.width&&(t.style.width=""),"undefined"!=typeof t._overlayData.height&&(t.style.height=""),"undefined"!=typeof t._overlayData.parent&&t._overlayData.parent.appendChild(t),t._overlayData=null),n._content=null;var i=n._background;i&&OOP.removeEventListener(i,"click",r._handler_background_click),n._background=null;var a=n._container;a&&a.parentNode&&(a.setAttribute("class",""),a.parentNode.removeChild(a)),n._container=null},show:function(t,a){null!=n._content&&e.hide(),OOP.dispatchEvent(e,new OOP.Event(e.EVENT_BEFORE_SHOW));var d,o,l,v,s="";"undefined"!=typeof a&&("undefined"!=typeof a.width&&(d=a.width),"undefined"!=typeof a.height&&(o=a.height),"undefined"!=typeof a.offsetX&&(l=a.offsetX),"undefined"!=typeof a.offsetY&&(v=a.offsetY),"undefined"!=typeof a.containerClass&&(s=a.containerClass));var c=n._container,E=n._background,_=n._frame,u=n._close,f=document.getElementById(t);f._overlayData=f._overlayData||{},"undefined"==typeof d&&(d="undefined"!=typeof document.documentElement.currentStyle?f.currentStyle.width:window.getComputedStyle(f).width),parseInt(d)?(_.style.width=d,f._overlayData.width=d,f.style.width="100%"):_.style.width="","undefined"==typeof o&&(o="undefined"!=typeof document.documentElement.currentStyle?f.currentStyle.height:window.getComputedStyle(f).height),parseInt(o)?(_.style.height=o,f._overlayData.height=o,f.style.height="100%"):_.style.height="",_.style.left="undefined"!=typeof l?l:"",_.style.top="undefined"!=typeof v?v:"",n._content=f,OOP.addEventListener(E,"click",r._handler_background_click),OOP.addEventListener(u,"click",r._handler_close_clicked),f._overlayData.parent=f.parentNode,f.parentNode.removeChild(f),_.appendChild(f),document.body.appendChild(c),c.setAttribute("class",s);var h=setTimeout(function(){clearTimeout(h),c.setAttribute("class",s+" visible")},50);i.offTransitionComplete(c),i.onTransitionComplete(c,function(){i.offTransitionComplete(c),OOP.dispatchEvent(e,new OOP.Event(e.EVENT_AFTER_SHOW))})},hide:function(){OOP.dispatchEvent(e,new OOP.Event(e.EVENT_BEFORE_HIDE));var t=n._close;t&&OOP.removeEventListener(t,"click",r._handler_close_clicked);var a=n._background;a&&OOP.removeEventListener(a,"click",r._handler_background_click);var d=n._container;if(d){i.offTransitionComplete(d),i.onTransitionComplete(d,function(){i.offTransitionComplete(d);var t=n._content;t&&(t.parentNode.removeChild(t),"undefined"!=typeof t._overlayData.width&&(t.style.width=""),"undefined"!=typeof t._overlayData.height&&(t.style.height=""),"undefined"!=typeof t._overlayData.parent&&t._overlayData.parent.appendChild(t),t._overlayData=null),n._content=null,d.setAttribute("class",""),d.parentNode.removeChild(d),OOP.dispatchEvent(e,new OOP.Event(e.EVENT_AFTER_HIDE))});var o=d.getAttribute("class");o=o.substr(0,o.length-"visible".length),d.setAttribute("class",o)}},_handler_close_clicked:function(){return e.hide(),!1},_handler_background_click:function(){return e.hide(),!1}},i=function(){for(var e=null,t=[["webkitTransition","webkitTransitionEnd"],["transition","transitionend"]],n=t.length,r=0;n>r&&"undefined"==typeof document.documentElement.style[t[r][0]];r++);return r!=n&&(e=t[r][1]),{onTransitionComplete:function(t,n){e?OOP.addEventListener(t,e,n):n()},offTransitionComplete:function(t,n){e&&("undefined"!=typeof n?OOP.removeEventListener(t,e,n):OOP.removeEventListener(t,e))}}}();return e={EVENT_BEFORE_SHOW:t.EVENT_BEFORE_SHOW,EVENT_AFTER_SHOW:t.EVENT_AFTER_SHOW,EVENT_BEFORE_HIDE:t.EVENT_BEFORE_HIDE,EVENT_AFTER_HIDE:t.EVENT_AFTER_HIDE,initialize:r.initialize,destroy:r.destroy,hide:r.hide,show:r.show}}();if(!OOP)var OOP=function(){var e={event:function(e,t){var n=null;try{n=new CustomEvent(e)}catch(r){document.createEventObject?(n=document.createEventObject("Event"),n.initCustomEvent&&n.initCustomEvent(e,!0,!0)):n={}}return n._type=e,n._data=t,n},addEventListener:function(t,n,r){t._eventHandlers||(t._eventHandlers={}),n=n.split(",");for(var i=n.length,a=0;i>a;a++){var d=n[a];if(t.addEventListener)r=e._addEventHandler(t,d,r),t.addEventListener(d,r);else if(t.attachEvent){var o=function(){r(window.event)};o.handler=r,o=e._addEventHandler(t,d,o),t.attachEvent("on"+d,o)}else"undefined"!=typeof jQuery?(r=e._addEventHandler(t,d,r),jQuery.on(d,r)):(t.addEventListener=e._addEventListener,t.addEventListener(d,r))}},_addEventListener:function(t,n){n._isCustom=!0,e._addEventHandler(this,t,n)},_addEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;i>a;a++){if(r[a]===n)return n;if(r[a].handler&&r[a].handler===n)return r[a]}return r.push(n),n},removeEventListener:function(t,n,r){t._eventHandlers||(t._eventHandlers={}),n=n.split(",");for(var i=n.length,a=0;i>a;a++){var d,o=n[a];d="undefined"==typeof r?t._eventHandlers[o]||[]:[r];for(var l=d.length,v=0;l>v;v++){var r=d[v];t.removeEventListener?(r=e._removeEventHandler(t,o,r),t.removeEventListener(o,r)):t.detachEvent?(r=e._removeEventHandler(t,o,r),t.detachEvent("on"+o,r)):"undefined"!=typeof jQuery?(r=e._removeEventHandler(t,o,r),jQuery.off(o,r)):(t.removeEventListener=e._removeEventListener,t.removeEventListener(o,r))}}},_removeEventListener:function(t,n){t=t.split(",");for(var r=t.length,i=0;r>i;i++){var a,d=t[i];a="undefined"==typeof n?this._eventHandlers[d]||[]:[n];for(var o=a.length,l=0;o>l;l++){var n=a[l];n._isCustom=!1,e._removeEventHandler(this,d,n)}}},_removeEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],i=r.length,a=0;i>a;a++){if(r[a]===n)return r.splice(a,1)[0];if(r[a].handler&&r[a].handler===n)return r.splice(a,1)[0]}},dispatchEvent:function(t,n){t._eventHandlers||(t._eventHandlers={}),t.dispatchEvent?t.dispatchEvent(n):t.fireEvent?t.fireEvent("on"+type,n):"undefined"!=typeof jQuery?jQuery(t).trigger(jQuery.Event(n._type,{_type:n._type,_data:n._data})):(t.dispatchEvent=e._dispatchEvent,t.dispatchEvent(n))},_dispatchEvent:function(t){e._dispatchEventHandlers(this,t)},_dispatchEventHandlers:function(e,t){var n=e._eventHandlers[t._type];if(n)for(var r=n.length,i=0;r>i;i++)n[i](t)}};return{Event:e.event,addEventListener:e.addEventListener,removeEventListener:e.removeEventListener,dispatchEvent:e.dispatchEvent}}();Overlay.initialize();