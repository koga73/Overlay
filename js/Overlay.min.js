/* Overlay v1.1.0 Copyright (c) 2015 AJ Savino - MIT LICENSE */
var Overlay=function(){var e,n={onBeforeShow:null,onAfterShow:null,onBeforeHide:null,onAfterHide:null,_hiddenContainer:null,_container:null,_background:null,_content:null,_frame:null,_close:null},t={initialize:function(e){n._hiddenContainer=document.getElementById(e);var t=document.createElement("div");t.setAttribute("id","overlayContainer"),n._container=t;var r=document.createElement("div");r.setAttribute("id","overlayBackground"),n._background=r;var d=document.createElement("div");d.setAttribute("id","overlayFrame"),n._frame=d;var i=document.createElement("a");i.setAttribute("id","overlayClose"),i.setAttribute("href","#Close"),n._close=i,d.appendChild(i),t.appendChild(r),t.appendChild(d)},destroy:function(){n._hiddenContainer=null;var e=n._close;e&&OOP.removeEventListener(e,"click",t._handler_close_clicked),n._close=null;var r=n._frame;r&&(r.style.marginTop="",r.style.marginLeft="",r.style.width="",r.style.height=""),n._frame=null;var d=n._content;d&&(d.style.width=d.data.width,d.style.height=d.data.height,d.parentNode.removeChild(d),hiddenContainer.appendChild(d)),n._content=null;var i=n._background;i&&OOP.removeEventListener(i,"click",t._handler_background_click),n._background=null;var o=n._container;o&&o.parentNode&&o.parentNode.removeChild(o),n._container=null},show:function(r,d){null!=n._content&&e.hide(),e.onBeforeShow&&e.onBeforeShow();var i,o,a,l;"undefined"!=typeof d&&("undefined"!=typeof d.width&&(i=d.width),"undefined"!=typeof d.height&&(o=d.height),"undefined"!=typeof d.offsetX&&(a=d.offsetX),"undefined"!=typeof d.offsetY&&(l=d.offsetY));var v=(n._hiddenContainer,n._container),c=n._background,s=n._frame,h=n._close,u=document.getElementById(r);u.data=u.data||{},"undefined"==typeof i&&(i="undefined"!=typeof document.documentElement.currentStyle?u[0].currentStyle.width:window.getComputedStyle(u).width),parseInt(i)&&(s.style.width=i,u.data.width=i,u.style.width="100%"),"undefined"==typeof o&&(o="undefined"!=typeof document.documentElement.currentStyle?u[0].currentStyle.height:window.getComputedStyle(u).height),parseInt(o)&&(s.style.height=o,u.data.height=o,u.style.height="100%"),"undefined"!=typeof a&&(s.style.left=a),"undefined"!=typeof l&&(s.style.top=l),n._content=u,OOP.addEventListener(c,"click",t._handler_background_click),OOP.addEventListener(h,"click",t._handler_close_clicked),s.appendChild(u),document.body.appendChild(v),e.onAfterShow&&e.onAfterShow()},hide:function(){e.onBeforeHide&&e.onBeforeHide();var r=n._hiddenContainer,d=n._close;d&&OOP.removeEventListener(d,"click",t._handler_close_clicked);var i=n._frame;i&&(i.style.marginTop="",i.style.marginLeft="",i.style.width="",i.style.height="");var o=n._content;o&&(o.style.width=o.data.width,o.style.height=o.data.height,o.parentNode.removeChild(o),r.appendChild(o)),n._content=null;var a=n._background;a&&OOP.removeEventListener(a,"click",t._handler_background_click);var l=n._container;l&&l.parentNode.removeChild(l),e.onAfterHide&&e.onAfterHide()},_handler_close_clicked:function(n){return n.preventDefault(),n.stopImmediatePropagation(),e.hide(),!1},_handler_background_click:function(n){return n.preventDefault(),n.stopImmediatePropagation(),e.hide(),!1}};return e={onBeforeShow:n.onBeforeShow,onAfterShow:n.onAfterShow,onBeforeHide:n.onBeforeHide,onAfterHide:n.onAfterHide,initialize:t.initialize,destroy:t.destroy,hide:t.hide,show:t.show}}();if(!OOP)var OOP=function(){var e={event:function(e,n){var t=null;try{t=new CustomEvent(e)}catch(r){document.createEventObject?(t=document.createEventObject("Event"),t.initCustomEvent&&t.initCustomEvent(e,!0,!0)):t={}}return t._type=e,t._data=n,t},addEventListener:function(n,t,r){n._eventHandlers||(n._eventHandlers={}),t=t.split(",");for(var d=t.length,i=0;d>i;i++){var o=t[i].trim();if(n.addEventListener)r=e._addEventHandler(n,o,r),n.addEventListener(o,r,!1);else if(n.attachEvent){var a=function(){r(window.event)};a.handler=r,a=e._addEventHandler(n,o,a),n.attachEvent("on"+o,a)}else n.addEventListener=e._addEventListener,n.addEventListener(o,r)}},_addEventListener:function(n,t){t._isCustom=!0,e._addEventHandler(this,n,t)},_addEventHandler:function(e,n,t){e._eventHandlers[n]||(e._eventHandlers[n]=[]);for(var r=e._eventHandlers[n],d=r.length,i=0;d>i;i++){if(r[i]===t)return t;if(r[i].handler&&r[i].handler===t)return r[i]}return r.push(t),t},removeEventListener:function(n,t,r){n._eventHandlers||(n._eventHandlers={}),t=t.split(",");for(var d=t.length,i=0;d>i;i++){var o,a=t[i].trim();o="undefined"==typeof r?_vars._eventHandlers[a]:[r];for(var l=o.length,v=0;l>v;v++){var r=o[v];n.removeEventListener?(r=e._removeEventHandler(n,a,r),n.removeEventListener(a,r,!1)):n.detachEvent?(r=e._removeEventHandler(n,a,r),n.detachEvent("on"+a,r)):(n.removeEventListener=e._removeEventListener,n.removeEventListener(a,r))}}},_removeEventListener:function(n,t){n=n.split(",");for(var r=n.length,d=0;r>d;d++){var i,o=n[d].trim();i="undefined"==typeof t?this._eventHandlers[o]:[t];for(var a=i.length,l=0;a>l;l++){var t=i[l];t._isCustom=!1,e._removeEventHandler(this,o,t)}}},_removeEventHandler:function(e,n,t){e._eventHandlers[n]||(e._eventHandlers[n]=[]);for(var r=e._eventHandlers[n],d=r.length,i=0;d>i;i++){if(r[i]===t)return r.splice(i,1);if(r[i].handler&&r[i].handler===t)return r.splice(i,1)}},dispatchEvent:function(n,t){n._eventHandlers||(n._eventHandlers={}),n.dispatchEvent?n.dispatchEvent(t):n.fireEvent?n.fireEvent("on"+type,t):(n.dispatchEvent=e._dispatchEvent,n.dispatchEvent(t))},_dispatchEvent:function(n){e._dispatchEventHandlers(this,n)},_dispatchEventHandlers:function(e,n){var t=e._eventHandlers[n._type];if(t)for(var r=t.length,d=0;r>d;d++)t[d](n)}};return{Event:e.event,addEventListener:e.addEventListener,removeEventListener:e.removeEventListener,dispatchEvent:e.dispatchEvent}}();