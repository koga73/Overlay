/*
* Overlay v1.2.0 Copyright (c) 2015 AJ Savino
* MIT LICENSE
*/
var Overlay=function(){var e,t={EVENT_BEFORE_SHOW:"beforeshow",EVENT_AFTER_SHOW:"aftershow",EVENT_BEFORE_HIDE:"beforehide",EVENT_AFTER_HIDE:"afterhide"},n={container:document.body,_container:null,_background:null,_content:null,_frame:null,_close:null,_showCallback:null,_hideCallback:null},r={initialize:function(){var e=document.createElement("div");e.setAttribute("id","overlayContainer"),n._container=e;var t=document.createElement("div");t.setAttribute("id","overlayBackground"),n._background=t;var r=document.createElement("div");r.setAttribute("id","overlayFrame"),n._frame=r;var a=document.createElement("button");a.setAttribute("id","overlayClose"),a.setAttribute("type","button"),n._close=a,r.appendChild(a),e.appendChild(t),e.appendChild(r)},destroy:function(){var e=n._close;e&&OOP.removeEventListener(e,"click",r._handler_close_clicked),n._close=null,n._frame=null;var t=n._content;t&&(t.parentNode.removeChild(t),"undefined"!=typeof t._overlayData.width&&(t.style.width=""),"undefined"!=typeof t._overlayData.height&&(t.style.height=""),"undefined"!=typeof t._overlayData.parent&&t._overlayData.parent.appendChild(t),t._overlayData=null),n._content=null;var a=n._background;a&&OOP.removeEventListener(a,"click",r._handler_background_click),n._background=null;var i=n._container;i&&i.parentNode&&(i.setAttribute("class",""),i.parentNode.removeChild(i)),n._container=null,n._showCallback=null,n._hideCallback=null},show:function(t,i,o){if(n._showCallback=o,OOP.dispatchEvent(e,new OOP.Event(e.EVENT_BEFORE_SHOW)),null!=n._content)return void e.hide(function(){e.show(t,i,o)});var d,l,s,v,c="";"undefined"!=typeof i&&("undefined"!=typeof i.width&&(d=i.width),"undefined"!=typeof i.height&&(l=i.height),"undefined"!=typeof i.offsetX&&(s=i.offsetX),"undefined"!=typeof i.offsetY&&(v=i.offsetY),"undefined"!=typeof i.containerClass&&(c=i.containerClass));var _=n._container,u=n._background,E=n._frame,h=n._close,f=document.getElementById(t);f._overlayData=f._overlayData||{},"undefined"==typeof d&&(d="undefined"!=typeof document.documentElement.currentStyle?f.currentStyle.width:window.getComputedStyle(f).width),parseInt(d)?(E.style.width=d,f._overlayData.width=d,f.style.width="100%"):E.style.width="","undefined"==typeof l&&(l="undefined"!=typeof document.documentElement.currentStyle?f.currentStyle.height:window.getComputedStyle(f).height),parseInt(l)?(E.style.height=l,f._overlayData.height=l,f.style.height="100%"):E.style.height="",E.style.left="undefined"!=typeof s?s:"",E.style.top="undefined"!=typeof v?v:"",n._content=f,OOP.addEventListener(u,"click",r._handler_background_click),OOP.addEventListener(h,"click",r._handler_close_clicked),f._overlayData.parent=f.parentNode,f.parentNode.removeChild(f),E.appendChild(f);var p=e.container;e.container.length&&(p=e.container[0]),p.appendChild(_),_.setAttribute("class",c);var y=setTimeout(function(){clearTimeout(y),_.setAttribute("class",c+" visible")},50);a.hasTransition(u)||a.hasTransition(E)?(a.offTransitionComplete(_),a.onTransitionComplete(_,r._handler_show_complete)):r._handler_show_complete()},hide:function(t){n._hideCallback=t,OOP.dispatchEvent(e,new OOP.Event(e.EVENT_BEFORE_HIDE));var i=n._close;i&&OOP.removeEventListener(i,"click",r._handler_close_clicked);var o=n._background;o&&OOP.removeEventListener(o,"click",r._handler_background_click);var d=n._frame,l=n._container;if(l){a.hasTransition(o)||a.hasTransition(d)?(a.offTransitionComplete(l),a.onTransitionComplete(l,r._handler_hide_complete)):r._handler_hide_complete();var s=l.getAttribute("class");s=s.substr(0,s.length-"visible".length),l.setAttribute("class",s)}},_handler_show_complete:function(){a.offTransitionComplete(n._container),OOP.dispatchEvent(e,new OOP.Event(e.EVENT_AFTER_SHOW));var t=n._showCallback;"undefined"!=typeof t&&(t(),n._showCallback=null)},_handler_hide_complete:function(){var t=n._container;a.offTransitionComplete(t);var r=n._content;r&&(r.parentNode.removeChild(r),"undefined"!=typeof r._overlayData.width&&(r.style.width=""),"undefined"!=typeof r._overlayData.height&&(r.style.height=""),"undefined"!=typeof r._overlayData.parent&&r._overlayData.parent.appendChild(r),r._overlayData=null),n._content=null,t.setAttribute("class",""),t.parentNode.removeChild(t),OOP.dispatchEvent(e,new OOP.Event(e.EVENT_AFTER_HIDE));var i=n._hideCallback;"undefined"!=typeof i&&(i(),n._hideCallback=null)},_handler_close_clicked:function(){return e.hide(),!1},_handler_background_click:function(){return e.hide(),!1}},a=function(){for(var e=null,t=null,n=[["webkitTransition","webkitTransitionEnd","-webkit-"],["transition","transitionend",""]],r=n.length,a=0;r>a&&"undefined"==typeof document.documentElement.style[n[a][0]];a++);return a!=r&&(e=n[a][1],t=n[a][2]),{hasTransition:function(e){return"undefined"!=typeof document.documentElement.currentStyle?parseFloat(e.currentStyle[t+"transition-duration"])>0:parseFloat(window.getComputedStyle(e)[t+"transition-duration"])>0},onTransitionComplete:function(t,n){e?OOP.addEventListener(t,e,n):n()},offTransitionComplete:function(t,n){e&&("undefined"!=typeof n?OOP.removeEventListener(t,e,n):OOP.removeEventListener(t,e))}}}();return e={EVENT_BEFORE_SHOW:t.EVENT_BEFORE_SHOW,EVENT_AFTER_SHOW:t.EVENT_AFTER_SHOW,EVENT_BEFORE_HIDE:t.EVENT_BEFORE_HIDE,EVENT_AFTER_HIDE:t.EVENT_AFTER_HIDE,container:n.container,initialize:r.initialize,destroy:r.destroy,hide:r.hide,show:r.show}}();if(!OOP)var OOP=function(){var e={event:function(e,t){var n=null;try{n=new CustomEvent(e)}catch(r){document.createEventObject?(n=document.createEventObject("Event"),n.initCustomEvent&&n.initCustomEvent(e,!0,!0)):n={}}return n._type=e,n._data=t,n},addEventListener:function(t,n,r){t._eventHandlers||(t._eventHandlers={}),n=n.split(",");for(var a=n.length,i=0;a>i;i++){var o=n[i];if(t.addEventListener)r=e._addEventHandler(t,o,r),t.addEventListener(o,r);else if(t.attachEvent){var d=function(){r(window.event)};d.handler=r,d=e._addEventHandler(t,o,d),t.attachEvent("on"+o,d)}else"undefined"!=typeof jQuery?(r=e._addEventHandler(t,o,r),jQuery.on(o,r)):(t.addEventListener=e._addEventListener,t.addEventListener(o,r))}},_addEventListener:function(t,n){n._isCustom=!0,e._addEventHandler(this,t,n)},_addEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],a=r.length,i=0;a>i;i++){if(r[i]===n)return n;if(r[i].handler&&r[i].handler===n)return r[i]}return r.push(n),n},removeEventListener:function(t,n,r){t._eventHandlers||(t._eventHandlers={}),n=n.split(",");for(var a=n.length,i=0;a>i;i++){var o,d=n[i];o="undefined"==typeof r?t._eventHandlers[d]||[]:[r];for(var l=o.length,s=0;l>s;s++){var r=o[s];t.removeEventListener?(r=e._removeEventHandler(t,d,r),t.removeEventListener(d,r)):t.detachEvent?(r=e._removeEventHandler(t,d,r),t.detachEvent("on"+d,r)):"undefined"!=typeof jQuery?(r=e._removeEventHandler(t,d,r),jQuery.off(d,r)):(t.removeEventListener=e._removeEventListener,t.removeEventListener(d,r))}}},_removeEventListener:function(t,n){t=t.split(",");for(var r=t.length,a=0;r>a;a++){var i,o=t[a];i="undefined"==typeof n?this._eventHandlers[o]||[]:[n];for(var d=i.length,l=0;d>l;l++){var n=i[l];n._isCustom=!1,e._removeEventHandler(this,o,n)}}},_removeEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],a=r.length,i=0;a>i;i++){if(r[i]===n)return r.splice(i,1)[0];if(r[i].handler&&r[i].handler===n)return r.splice(i,1)[0]}},dispatchEvent:function(t,n){t._eventHandlers||(t._eventHandlers={}),t.dispatchEvent?t.dispatchEvent(n):t.fireEvent?t.fireEvent("on"+type,n):"undefined"!=typeof jQuery?jQuery(t).trigger(jQuery.Event(n._type,{_type:n._type,_data:n._data})):(t.dispatchEvent=e._dispatchEvent,t.dispatchEvent(n))},_dispatchEvent:function(t){e._dispatchEventHandlers(this,t)},_dispatchEventHandlers:function(e,t){var n=e._eventHandlers[t._type];if(n)for(var r=n.length,a=0;r>a;a++)n[a](t)}};return{Event:e.event,addEventListener:e.addEventListener,removeEventListener:e.removeEventListener,dispatchEvent:e.dispatchEvent}}();Overlay.initialize();