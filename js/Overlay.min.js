/*
 * overlay v3.0.0 Copyright (c) 2020 AJ Savino
 * https://github.com/koga73/overlay
 * MIT License
 */
/* prettier-ignore */
var Overlay=function(){var s,e="beforeshow",t="aftershow",n="beforehide",r="afterhide",l="overlayContainer",v="overlayBackground",c="overlayFrame",u="overlayClose",k="visible",A="overlay-visible",H="overlay-content",_="data-overlay-container",T="data-overlay-page-wrap",h="data-overlay-trigger",D="data-overlay-width",S="data-overlay-height",F="data-overlay-offset-x",N="data-overlay-offset-y",j="data-overlay-container-class",O="data-overlay-user-closable",V="data-overlay-auto-focus",W="data-overlay-immediate",x="a[href],input,select,textarea,button,[tabindex]",B={container:null,pageWrap:null,_container:null,_background:null,_content:null,_frame:null,_close:null,_showCallback:null,_hideCallback:null,_lastFocus:null,_immediate:!1},R={init:function(){var e=document.createElement("div");e.setAttribute("id",l),B._container=e;var t=document.createElement("div");t.setAttribute("id",v),B._background=t;var n=document.createElement("div");n.setAttribute("id",c),B._frame=n;var r=document.createElement("button");r.setAttribute("id",u),r.setAttribute("type","button"),r.innerHTML="Close",B._close=r,n.appendChild(r),e.appendChild(t),e.appendChild(n),(e=document.querySelector("["+_+"]"))&&(U.container=e);var a=document.querySelector("["+T+"]");a&&(U.pageWrap=a);for(var i=document.querySelectorAll("["+h+"]"),o=i.length,d=0;d<o;d++)!function(){var e=i[d],t=e.getAttribute(h);t.length||(t=e.getAttribute("href")),"#"==t.substr(0,1)&&(t=t.substr(1,t.length-1)),q.addEventListener(e,"click",function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,U.show(t),!1})}();q.addEvents(U)},destroy:function(){q.removeEvents(U),Q.removeClass(document.body,A),q.removeEventListener(document,"focusin",R._handler_document_focusin),q.removeEventListener(document,"keyup",R._handler_document_keyUp);var e=B._close;e&&(q.removeEventListener(e,"click",R._handler_close_click),e.removeAttribute("disabled")),B._close=null,B._frame=null;var t=B._content;t&&(t.parentNode.removeChild(t),void 0!==t._overlayData.width&&(t.style.width=""),void 0!==t._overlayData.height&&(t.style.height=""),void 0!==t._overlayData.parent&&t._overlayData.parent&&t._overlayData.parent.appendChild(t),t._overlayData=null,t.removeAttribute("tabindex"),Q.removeClass(t,H)),B._content=null;var n=B._background;n&&q.removeEventListener(n,"click",R._handler_background_click),B._background=null;var r=B._container;r&&(r.setAttribute("class",""),r.parentNode&&r.parentNode.removeChild(r)),B._container=null,B._showCallback=null,B._hideCallback=null,B._lastFocus=null;for(var a=document.querySelectorAll("["+h+"]"),i=a.length,o=0;o<i;o++){var d=a[o],l=d.getAttribute(h);l.length||(l=d.getAttribute("href")),"#"==l.substr(0,1)&&(l=l.substr(1,l.length-1)),q.removeEventListener(d,"click")}},show:function(e,t,n){var r="string"==typeof e;if(void 0===t&&(t={}),B._showCallback=n,Q.addClass(document.body,A),q.dispatchEvent(U,new q.Event(U.EVENT_BEFORE_SHOW,{content:e.id||e})),null==B._content){var a,i,o,d,l,s,v,c,u,_,e=r?document.getElementById(e):e,h="",m=!0,E=!0,f=!1;void 0!==t.width?a=t.width:(l=e.getAttribute(D))&&l.length&&(a=l),void 0!==t.height?i=t.height:(s=e.getAttribute(S))&&s.length&&(i=s),void 0!==t.offsetX?o=t.offsetX:(v=e.getAttribute(F))&&v.length&&(o=v),void 0!==t.offsetY?d=t.offsetY:(c=e.getAttribute(N))&&c.length&&(d=c),void 0!==t.containerClass?h=t.containerClass:(u=e.getAttribute(j))&&u.length&&(h=u),void 0!==t.userClosable?m=!0===t.userClosable:e.hasAttribute(O)&&(m="false"!==(e.getAttribute(O)||"true").toLowerCase()),void 0!==t.autoFocus?E=!0===t.autoFocus:e.hasAttribute(V)&&(E="false"!==(e.getAttribute(V)||"true").toLowerCase()),void 0!==t.immediate?f=!0===t.immediate:e.hasAttribute(W)&&(f=(_=e.getAttribute(W)||"true")&&"false"!==_.toLowerCase());var p=B._container,y=B._background,b=B._frame,g=B._close;if(Q.addClass(e,H),e.setAttribute("tabindex","0"),e._overlayData=e._overlayData||{},void 0===a&&(a=void 0!==document.documentElement.currentStyle?e.currentStyle.width:window.getComputedStyle(e).width),parseInt(a)?(b.style.width=a,e._overlayData.width=a,e.style.width="100%"):b.style.width="",void 0===i&&(i=void 0!==document.documentElement.currentStyle?e.currentStyle.height:window.getComputedStyle(e).height),parseInt(i)?(b.style.height=i,e._overlayData.height=i,e.style.height="100%"):b.style.height="",b.style.left=void 0!==o?o:"",b.style.top=void 0!==d?d:"",B._content=e,q.addEventListener(document,"focusin",R._handler_document_focusin),m?(q.addEventListener(document,"keyup",R._handler_document_keyUp),q.addEventListener(y,"click",R._handler_background_click),q.addEventListener(g,"click",R._handler_close_click)):g.setAttribute("disabled","disabled"),e._overlayData.parent=e.parentNode,r&&e.parentNode.removeChild(e),b.insertBefore(e,g),!U.container){if(!document.body)throw new Error("Container is undefined");U.container=document.body}var C=U.container;U.container.length&&(C=U.container[0]),C.appendChild(p),B._lastFocus=document.activeElement;var w=U.pageWrap;if(w){if(w.contains(C))throw"Error: The page wrapper ["+T+"] should not contain the modal container. They should be siblings instead.";w.setAttribute("aria-hidden","true"),w.setAttribute("tabindex","-1")}((E?e.querySelector(x):null)||e).focus(),Q.addClass(p,h);var L=setTimeout(function(){clearTimeout(L),Q.addClass(p,k)},50);!(B._immediate=f)&&(I.hasTransition(y)||I.hasTransition(b))?(I.offTransitionComplete(p),I.onTransitionComplete(p,R._handler_show_complete)):R._handler_show_complete()}else U.hide(function(){U.show(e,t,n)})},hide:function(e){B._hideCallback=e;var t=B._content;q.dispatchEvent(U,new q.Event(U.EVENT_BEFORE_HIDE,{content:t.id||t})),q.removeEventListener(document,"focusin",R._handler_document_focusin),q.removeEventListener(document,"keyup",R._handler_document_keyUp);var n=B._close;n&&(q.removeEventListener(n,"click",R._handler_close_click),n.removeAttribute("disabled"));var r=B._background;r&&q.removeEventListener(r,"click",R._handler_background_click);var a=B._frame,i=B._container;i&&(!B._immediate&&(I.hasTransition(r)||I.hasTransition(a))?(I.offTransitionComplete(i),I.onTransitionComplete(i,R._handler_hide_complete)):R._handler_hide_complete(),Q.removeClass(i,k))},_handler_show_complete:function(){I.offTransitionComplete(B._container);var e=B._content;q.dispatchEvent(U,new q.Event(U.EVENT_AFTER_SHOW,{content:e.id||e}));var t=B._showCallback;void 0!==t&&(t(),B._showCallback=null)},_handler_hide_complete:function(){var e=B._container;I.offTransitionComplete(e);var t=B._content;t&&(t.parentNode.removeChild(t),void 0!==t._overlayData.width&&(t.style.width=""),void 0!==t._overlayData.height&&(t.style.height=""),void 0!==t._overlayData.parent&&t._overlayData.parent&&t._overlayData.parent.appendChild(t),t._overlayData=null,t.removeAttribute("tabindex"),Q.removeClass(t,H)),B._content=null,e.setAttribute("class",""),e.parentNode.removeChild(e);var n=U.pageWrap;n&&(n.removeAttribute("aria-hidden","true"),n.removeAttribute("tabindex","-1"));var r=B._lastFocus;r&&r.focus(),B._lastFocus=null,Q.removeClass(document.body,A),q.dispatchEvent(U,new q.Event(U.EVENT_AFTER_HIDE,{content:t.id||t}));var a=B._hideCallback;void 0!==a&&(a(),B._hideCallback=null)},_handler_close_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,U.hide(),!1},_handler_background_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,U.hide(),!1},_handler_document_keyUp:function(e){27==e.keyCode&&U.hide()},_handler_document_focusin:function(e){var t,n=e.target||e.srcElement,r=B._frame;n==r||r.contains(n)||(void 0!==e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,(t=B._content)&&t.focus())}},I=function(){for(var n=null,t=null,e=[["webkitTransition","webkitTransitionEnd","-webkit-"],["transition","transitionend",""]],r=e.length,a=0;a<r&&void 0===document.documentElement.style[e[a][0]];a++);return a!=r&&(n=e[a][1],t=e[a][2]),{hasTransition:function(e){return void 0!==document.documentElement.currentStyle?0<parseFloat(e.currentStyle[t+"transition-duration"]):0<parseFloat(window.getComputedStyle(e)[t+"transition-duration"])},onTransitionComplete:function(e,t){n?q.addEventListener(e,n,t):t()},offTransitionComplete:function(e,t){n&&(void 0!==t?q.removeEventListener(e,n,t):q.removeEventListener(e,n))}}}(),Q=("function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{addClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");for(var r in t=t.split(" "))n.push(t[r].trim());e.setAttribute("class",n.join(" ").trim())},removeClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");for(var r in t=t.split(" "))for(var a=n.length,i=0;i<a;i++)n[i]==t[r].trim()&&(n.splice(i,1),a--,i--);e.setAttribute("class",n.join(" ").trim())},hasClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");t=t.split(" ");var r=0;for(var a in t)for(var i=n.length,o=0;o<i;o++)if(n[o]==t[a].trim()){r++;break}return r==t.length}}),q={Event:(s={Event:function(t,e){var n=null;try{n=new CustomEvent(t,{detail:e})}catch(e){"undefined"!=typeof document&&document.createEventObject?(n=document.createEventObject("Event")).initCustomEvent&&n.initCustomEvent(t,!0,!0):n={}}return n.type=t,n.detail=e,n},addEvents:function(e,t){return t=!0===t,e._eventHandlers||(e._eventHandlers={}),e.addEventListener||(e.addEventListener=s._addEventListener,t||(e.on=s._addEventListener)),e.removeEventListener||(e.removeEventListener=s._removeEventListener,t||(e.off=s._removeEventListener)),e.dispatchEvent||(e.dispatchEvent=s._dispatchEvent,t||(e.trigger=s._dispatchEvent,e.emit=s._dispatchEvent)),e},removeEvents:function(e,t){return t=!0===t,e._eventHandlers&&delete e._eventHandlers,e.addEventListener&&(delete e.addEventListener,t||delete e.on),e.removeEventListener&&(delete e.removeEventListener,t||delete e.off),e.dispatchEvent&&(delete e.dispatchEvent,t||(delete e.trigger,delete e.emit)),e},addEventListener:function(e,t,n){if("string"!=typeof e){e._eventHandlers||(e._eventHandlers={});for(var r=(t=t.split(/,|\s/)).length,a=0;a<r;a++){var i,o=t[a];e.addEventListener?(n=s._addEventHandler(e,o,n),e.addEventListener(o,n)):e.attachEvent?((i=function(){n(window.event)}).handler=n,i=s._addEventHandler(e,o,i),e.attachEvent("on"+o,i)):"undefined"!=typeof jQuery?(n=s._addEventHandler(e,o,n),jQuery.on(o,n)):(e.addEventListener=s._addEventListener,e.addEventListener(o,n))}}},_addEventListener:function(e,t){t._isCustom=!0,s._addEventHandler(this,e,t)},_addEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],a=r.length,i=0;i<a;i++){if(r[i]===n)return n;if(r[i].handler&&r[i].handler===n)return r[i]}return r.push(n),n},removeEventListener:function(e,t,n){if("string"!=typeof e){e._eventHandlers||(e._eventHandlers={});for(var r=(t=t.split(/,|\s/)).length,a=0;a<r;a++)for(var i=t[a],o=void 0===n?e._eventHandlers[i]||[]:[n],d=o.length,l=0;l<d;l++){n=o[l];e.removeEventListener?(n=s._removeEventHandler(e,i,n),e.removeEventListener(i,n)):e.detachEvent?(n=s._removeEventHandler(e,i,n),e.detachEvent("on"+i,n)):"undefined"!=typeof jQuery?(n=s._removeEventHandler(e,i,n),jQuery.off(i,n)):(e.removeEventListener=s._removeEventListener,e.removeEventListener(i,n))}}},_removeEventListener:function(e,t){for(var n=(e=e.split(/,|\s/)).length,r=0;r<n;r++)for(var a=e[r],i=void 0===t?this._eventHandlers[a]||[]:[t],o=i.length,d=0;d<o;d++){(t=i[d])._isCustom=!1,s._removeEventHandler(this,a,t)}},_removeEventHandler:function(e,t,n){e._eventHandlers[t]||(e._eventHandlers[t]=[]);for(var r=e._eventHandlers[t],a=r.length,i=0;i<a;i++){if(r[i]===n)return r.splice(i,1)[0];if(r[i].handler&&r[i].handler===n)return r.splice(i,1)[0]}},dispatchEvent:function(e,t){e._eventHandlers||(e._eventHandlers={}),e.dispatchEvent?e.dispatchEvent(t):e.fireEvent?e.fireEvent("on"+type,t):"undefined"!=typeof jQuery?jQuery(e).trigger(jQuery.Event(t.type,{type:t.type,data:t.detail})):(e.dispatchEvent=s._dispatchEvent,e.dispatchEvent(t))},_dispatchEvent:function(e){s._dispatchEventHandlers(this,e)},_dispatchEventHandlers:function(e,t){var n=e._eventHandlers[t.type];if(n)for(var r=n.length,a=0;a<r;a++)n[a](t,t.detail)}}).Event,addEvents:s.addEvents,removeEvents:s.removeEvents,addEventListener:s.addEventListener,removeEventListener:s.removeEventListener,dispatchEvent:s.dispatchEvent},U={EVENT_BEFORE_SHOW:e,EVENT_AFTER_SHOW:t,EVENT_BEFORE_HIDE:n,EVENT_AFTER_HIDE:r,container:B.container,pageWrap:B.pageWrap,init:R.init,destroy:R.destroy,hide:R.hide,show:R.show};return document.body&&U.init(),U}();
