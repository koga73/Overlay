/*
* Overlay v2.0.1 Copyright (c) 2019 AJ Savino
* https://github.com/koga73/Overlay
* MIT LICENSE
*/
var Overlay=function(){var k,e="beforeshow",t="aftershow",n="beforehide",r="afterhide",d="overlayContainer",s="overlayBackground",c="overlayFrame",u="overlayClose",w="visible",A="overlay-visible",T="overlay-content",v="data-overlay-container",P="data-overlay-page-wrap",_="data-overlay-trigger",D="data-overlay-width",S="data-overlay-height",L="data-overlay-offset-x",F="data-overlay-offset-y",N="data-overlay-container-class",V="data-overlay-user-closable",W={container:null,pageWrap:null,_container:null,_background:null,_content:null,_frame:null,_close:null,_showCallback:null,_hideCallback:null,_lastFocus:null},H={init:function(){(n=document.createElement("div")).setAttribute("id",d),W._container=n;var e=document.createElement("div");e.setAttribute("id",s),W._background=e;var t=document.createElement("div");t.setAttribute("id",c),W._frame=t;var n,r=document.createElement("button");r.setAttribute("id",u),r.setAttribute("type","button"),r.innerHTML="Close",W._close=r,t.appendChild(r),n.appendChild(e),n.appendChild(t),(n=document.querySelector("["+v+"]"))&&(k.container=n);var a=document.querySelector("["+P+"]");a&&(k.pageWrap=a);for(var o=document.querySelectorAll("["+_+"]"),i=o.length,l=0;l<i;l++)!function(e){var t=o[l],n=t.getAttribute(_);n.length||(n=t.getAttribute("href")),"#"==n.substr(0,1)&&(n=n.substr(1,n.length-1)),OOP.addEventListener(t,"click",function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,k.show(n),!1})}()},destroy:function(){R.removeClass(document.body,A),OOP.removeEventListener(document,"focusin",H._handler_document_focusin),OOP.removeEventListener(document,"keyup",H._handler_document_keyUp);var e=W._close;e&&(OOP.removeEventListener(e,"click",H._handler_close_click),e.removeAttribute("disabled")),W._close=null,W._frame=null;var t=W._content;t&&(t.parentNode.removeChild(t),void 0!==t._overlayData.width&&(t.style.width=""),void 0!==t._overlayData.height&&(t.style.height=""),void 0!==t._overlayData.parent&&t._overlayData.parent&&t._overlayData.parent.appendChild(t),t._overlayData=null,t.removeAttribute("tabindex"),R.removeClass(t,T)),W._content=null;var n=W._background;n&&OOP.removeEventListener(n,"click",H._handler_background_click),W._background=null;var r=W._container;r&&(r.setAttribute("class",""),r.parentNode&&r.parentNode.removeChild(r)),W._container=null,W._showCallback=null,W._hideCallback=null,W._lastFocus=null;for(var a=document.querySelectorAll("["+_+"]"),o=a.length,i=0;i<o;i++){var l=a[i],d=l.getAttribute(_);d.length||(d=l.getAttribute("href")),"#"==d.substr(0,1)&&(d=d.substr(1,d.length-1)),OOP.removeEventListener(l,"click")}},show:function(e,t,n){var r=OOP.isString(e);if(void 0===t&&(t={}),W._showCallback=n,R.addClass(document.body,A),OOP.dispatchEvent(k,new OOP.Event(k.EVENT_BEFORE_SHOW)),null==W._content){e=r?document.getElementById(e):e;var a,o,i,l,d="",s=!0;if(void 0!==t.width)a=t.width;else{var c=e.getAttribute(D);c&&c.length&&(a=c)}if(void 0!==t.height)o=t.height;else{var u=e.getAttribute(S);u&&u.length&&(o=u)}if(void 0!==t.offsetX)i=t.offsetX;else{var v=e.getAttribute(L);v&&v.length&&(i=v)}if(void 0!==t.offsetY)l=t.offsetY;else{var _=e.getAttribute(F);_&&_.length&&(l=_)}if(void 0!==t.containerClass)d=t.containerClass;else{var h=e.getAttribute(N);h&&h.length&&(d=h)}if(void 0!==t.userClosable)s=!0===t.userClosable;else{var m=e.getAttribute(V);m&&m.length&&(s="true"==m.toLowerCase())}var p=W._container,f=W._background,b=W._frame,y=W._close;if(R.addClass(e,T),e.setAttribute("tabindex","0"),e._overlayData=e._overlayData||{},void 0===a&&(a=void 0!==document.documentElement.currentStyle?e.currentStyle.width:window.getComputedStyle(e).width),parseInt(a)?(b.style.width=a,e._overlayData.width=a,e.style.width="100%"):b.style.width="",void 0===o&&(o=void 0!==document.documentElement.currentStyle?e.currentStyle.height:window.getComputedStyle(e).height),parseInt(o)?(b.style.height=o,e._overlayData.height=o,e.style.height="100%"):b.style.height="",b.style.left=void 0!==i?i:"",b.style.top=void 0!==l?l:"",W._content=e,OOP.addEventListener(document,"focusin",H._handler_document_focusin),s?(OOP.addEventListener(document,"keyup",H._handler_document_keyUp),OOP.addEventListener(f,"click",H._handler_background_click),OOP.addEventListener(y,"click",H._handler_close_click)):y.setAttribute("disabled","disabled"),e._overlayData.parent=e.parentNode,r&&e.parentNode.removeChild(e),b.insertBefore(e,y),!k.container){if(!document.body)throw new Error("Container is undefined");k.container=document.body}var g=k.container;k.container.length&&(g=k.container[0]),g.appendChild(p),W._lastFocus=document.activeElement;var E=k.pageWrap;if(E){if(E.contains(g))throw"Error: The page wrapper ["+P+"] should not contain the modal container. They should be siblings instead.";E.setAttribute("aria-hidden","true"),E.setAttribute("tabindex","-1")}var O=null;O||(O=e),O.focus(),R.addClass(p,d);var C=setTimeout(function(){clearTimeout(C),R.addClass(p,w)},50);B.hasTransition(f)||B.hasTransition(b)?(B.offTransitionComplete(p),B.onTransitionComplete(p,H._handler_show_complete)):H._handler_show_complete()}else k.hide(function(){k.show(e,t,n)})},hide:function(e){W._hideCallback=e,OOP.dispatchEvent(k,new OOP.Event(k.EVENT_BEFORE_HIDE)),OOP.removeEventListener(document,"focusin",H._handler_document_focusin),OOP.removeEventListener(document,"keyup",H._handler_document_keyUp);var t=W._close;t&&(OOP.removeEventListener(t,"click",H._handler_close_click),t.removeAttribute("disabled"));var n=W._background;n&&OOP.removeEventListener(n,"click",H._handler_background_click);var r=W._frame,a=W._container;a&&(B.hasTransition(n)||B.hasTransition(r)?(B.offTransitionComplete(a),B.onTransitionComplete(a,H._handler_hide_complete)):H._handler_hide_complete(),R.removeClass(a,w))},_handler_show_complete:function(){B.offTransitionComplete(W._container),OOP.dispatchEvent(k,new OOP.Event(k.EVENT_AFTER_SHOW));var e=W._showCallback;void 0!==e&&(e(),W._showCallback=null)},_handler_hide_complete:function(){var e=W._container;B.offTransitionComplete(e);var t=W._content;t&&(t.parentNode.removeChild(t),void 0!==t._overlayData.width&&(t.style.width=""),void 0!==t._overlayData.height&&(t.style.height=""),void 0!==t._overlayData.parent&&t._overlayData.parent&&t._overlayData.parent.appendChild(t),t._overlayData=null,t.removeAttribute("tabindex"),R.removeClass(t,T)),W._content=null,e.setAttribute("class",""),e.parentNode.removeChild(e);var n=k.pageWrap;n&&(n.removeAttribute("aria-hidden","true"),n.removeAttribute("tabindex","-1"));var r=W._lastFocus;r&&r.focus(),W._lastFocus=null,R.removeClass(document.body,A),OOP.dispatchEvent(k,new OOP.Event(k.EVENT_AFTER_HIDE));var a=W._hideCallback;void 0!==a&&(a(),W._hideCallback=null)},_handler_close_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,k.hide(),!1},_handler_background_click:function(e){return void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1,k.hide(),!1},_handler_document_keyUp:function(e){27==e.keyCode&&k.hide()},_handler_document_focusin:function(e){var t=e.target||e.srcElement,n=W._frame;if(t!=n&&!n.contains(t)){void 0!==e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;var r=W._content;r&&r.focus()}}},B=function(){for(var n=null,t=null,e=[["webkitTransition","webkitTransitionEnd","-webkit-"],["transition","transitionend",""]],r=e.length,a=0;a<r&&void 0===document.documentElement.style[e[a][0]];a++);return a!=r&&(n=e[a][1],t=e[a][2]),{hasTransition:function(e){return void 0!==document.documentElement.currentStyle?0<parseFloat(e.currentStyle[t+"transition-duration"]):0<parseFloat(window.getComputedStyle(e)[t+"transition-duration"])},onTransitionComplete:function(e,t){n?OOP.addEventListener(e,n,t):t()},offTransitionComplete:function(e,t){n&&(void 0!==t?OOP.removeEventListener(e,n,t):OOP.removeEventListener(e,n))}}}(),R=("function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),{addClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");for(var r in t=t.split(" "))n.push(t[r].trim());e.setAttribute("class",n.join(" ").trim())},removeClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");for(var r in t=t.split(" "))for(var a=n.length,o=0;o<a;o++)n[o]==t[r].trim()&&(n.splice(o,1),a--,o--);e.setAttribute("class",n.join(" ").trim())},hasClass:function(e,t){var n=(e.getAttribute("class")||"").split(" ");t=t.split(" ");var r=0;for(var a in t)for(var o=n.length,i=0;i<o;i++)if(n[i]==t[a].trim()){r++;break}return r==t.length}});return k={EVENT_BEFORE_SHOW:e,EVENT_AFTER_SHOW:t,EVENT_BEFORE_HIDE:n,EVENT_AFTER_HIDE:r,container:W.container,pageWrap:W.pageWrap,init:H.init,destroy:H.destroy,hide:H.hide,show:H.show},document.body&&k.init(),k}();