<!DOCTYPE html>
<html lang="en">
	<head>
		<title>OOP</title>

		<meta charset="utf-8"/>
	</head>
	<body>
		<h1>
			Open the console and view source for examples
		</h1>

		<script src="OOP.js"></script>

		<!-- clone -->
		<script>
			console.log("--- TEST 'clone' ---");

			var a = {
				testNum:123,
				testStr:"this is a string",
				testObj:{
					nested1:{
						foo:"bar"
					},
					nested2:{
						bar:"foo"
					}
				},
				testArr1:[1,2,3],
				testArr2:[
					{abc:123},
					{def:456}
				]
			};
			var b = OOP.clone(a);

			console.log("A:", a, a == a); //true
			console.log("B:", b, a == b); //false
			console.log("Expected all", false);
			console.log(a.testObj == b.testObj); //false
			console.log(a.testObj.nested1 == b.testObj.nested1); //false
			console.log(a.testObj.nested2 == b.testObj.nested2); //false
			console.log(a.testArr1 == b.testArr1); //false
			console.log(a.testArr2[0] == b.testArr2[0]); //false
			console.log(a.testArr2[1] == b.testArr2[1]); //false
			console.log("\n");
		</script>

		<!-- extend -->
		<script>
			console.log("--- TEST 'extend' ---");

			console.log(OOP.extend({abc:123}, {def:456}, {ghi:{jkl:789}}));
			console.log("\n");
		</script>

		<!-- namespace -->
		<script>
			console.log("--- TEST 'namespace' ---");

			OOP.namespace("foo.bar.test", {test:123});
			console.log(foo.bar.test);
			console.log("\n");
		</script>

		<!-- createClass -->
		<script>
			console.log("--- TEST 'createClass' ---");

			OOP.namespace("foo.bar.Shape", OOP.createClass(
				//Instance
				{
					width:150,
					height:150
				},
				//Static
				{
					getArea:function(obj){
						return obj.width * obj.height;
					}
				},
				//Events
				true
			));

			var a = new foo.bar.Shape();
			console.log("A:", a, foo.bar.Shape.getArea(a));

			var b = new foo.bar.Shape({
				width:100,
				height:100
			});
			console.log("B:", b, foo.bar.Shape.getArea(b));
			console.log("\n");
		</script>

		<!-- inherit -->
		<script>
			console.log("--- TEST 'inherit' ---");

			OOP.namespace("foo.bar.Triangle", OOP.inherit(foo.bar.Shape, OOP.createClass(
				//Instance
				{
					angles:[30, 60, 90]
				},
				//Static
				{
					getArea:function(obj){
						return obj.width * obj.height * 0.5;
					}
				},
				//Events
				false
			)));

			var a = new foo.bar.Triangle();
			var b = new foo.bar.Triangle({
				width:100,
				height:100
			});
			console.log("A:", a, foo.bar.Triangle.getArea(a));
			console.log("B:", b, foo.bar.Triangle.getArea(b));
			//You can use the object or a string for isType
			console.log("isTriangle", OOP.isType(a, "foo.bar.Triangle")); //true
			console.log("isShape", OOP.isType(a, foo.bar.Shape)); //true
			console.log("\n");
		</script>

		<!-- events -->
		<script>
			console.log("--- TEST 'events' ---");

			a.addEventListener("test", function(evt, data){
				console.log("Got event 'test'", evt, data)
			});

			a.dispatchEvent(new OOP.Event("test", 100));
			a._super.dispatchEvent(new OOP.Event("test", 100));
		</script>
	</body>
</html>